var Qt=Object.defineProperty,Xt=Object.defineProperties;var Zt=Object.getOwnPropertyDescriptors;var et=Object.getOwnPropertySymbols;var ft=Object.prototype.hasOwnProperty,yt=Object.prototype.propertyIsEnumerable;var Et=(t,a,r)=>a in t?Qt(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,F=(t,a)=>{for(var r in a||(a={}))ft.call(a,r)&&Et(t,r,a[r]);if(et)for(var r of et(a))yt.call(a,r)&&Et(t,r,a[r]);return t},ce=(t,a)=>Xt(t,Zt(a));var tt=(t,a)=>{var r={};for(var s in t)ft.call(t,s)&&a.indexOf(s)<0&&(r[s]=t[s]);if(t!=null&&et)for(var s of et(t))a.indexOf(s)<0&&yt.call(t,s)&&(r[s]=t[s]);return r};import{R as e,O as it,r as d,u as ea,d as ta,a as aa,b as na,c as U,e as Ie,N as rt,s as Ve,f as ra,L as mt,H as Lt,g as Oe,A as je,h as st,i as sa,S as Dt,P as At,B as He,j as Y,k as la,F as Ft,l as oa,m as dt,n as ca,o as ia,p as ma,q as da,t as ne,v as fe,w as ye,x as w,I as K,y as Ee,z as T,C as ua,D as pa,E as Ne,G as bt,J as De,K as Ae,M as ga,Q as V,T as Se,U as Ye,V as We,W as _e,X as j,Y as Ke,Z as Je,_ as pt,$ as Ue,a0 as he,a1 as ha,a2 as Ea,a3 as fa,a4 as ya,a5 as ve,a6 as ba,a7 as Ca,a8 as Sa,a9 as xa,aa as It,ab as Ct,ac as $a,ad as qa,ae as va,af as wa,ag as ka,ah as Ba,ai as St,aj as at,ak as La,al as Da,am as Aa,an as Fa,ao as Ia,ap as Na,aq as Ta,ar as Ma,as as Pa,at as lt,au as te,av as ae,aw as Me,ax as ge,ay as Ge,az as Nt,aA as ot,aB as Ra,aC as Ga,aD as za,aE as Oa,aF as ja,aG as Ua,aH as nt,aI as xt,aJ as Va,aK as Ha,aL as Ya,aM as R,aN as Wa,aO as _a,aP as Ka,aQ as Ja,aR as Qa,aS as Xa}from"./vendor.2fdfd29c.js";const Za=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function r(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerpolicy&&(n.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?n.credentials="include":l.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(l){if(l.ep)return;l.ep=!0;const n=r(l);fetch(l.href,n)}};Za();const en=()=>e.createElement(e.Fragment,null,e.createElement(it,null));var x=(t,a)=>{const[r,s]=d.exports.useState(null),[l,n]=d.exports.useState(""),[c,i]=d.exports.useState(!1),{enqueue:p}=ea();return{data:r,error:l,loading:c,request:async(...g)=>{i(!0);try{const o=await t(...g);s(o.data),a&&(a.onComplete&&a.onComplete(o.data),a.successMessage&&p({overrides:{Content:{style:({$theme:h})=>({backgroundColor:h.colors.positive})}},message:a.successMessage,startEnhancer:({size:h})=>e.createElement(ta,{size:h})}))}catch(o){const h=()=>o?o.response&&o.response.data?o.response.data.message:o.message:"Unexpected Error!";n(h()),a&&(a.onError&&a.onError(o),a.errorMessage&&p({overrides:{Content:{style:({$theme:b})=>({backgroundColor:b.colors.negative})}},message:`${a.errorMessage}: ${h()}`,startEnhancer:({size:b})=>e.createElement(aa,{size:b})}))}finally{i(!1)}}}};const I=na.create({baseURL:"/api"});var ut={login:t=>I.post("auth/login",t),registerTeacher:t=>I.post("auth/register/teacher",t),registerAdmin:t=>I.post("auth/register/admin",t)};const Tt=e.createContext({}),ze=()=>{const t=U(),{metadata:a,setMetadata:r}=d.exports.useContext(Tt),l={errorMessage:"Something went wrong",onComplete:o=>{localStorage.setItem("auth",JSON.stringify(o)),r(o),t("/app")}},n=x(ut.login,l),{request:c,loading:i}=x(ut.registerTeacher,l);return{metadata:a,login:n,signup:{request:o=>{switch(o.role){case"TEACHER":c(o);break;default:alert("Something went wrong!")}},loading:i},logout:()=>{localStorage.removeItem("auth"),r({}),t("/")}}},tn=()=>{const[t,a]=Ie(),{metadata:r}=ze();return e.createElement("div",{className:t({background:"#EBF8FF"})},r&&r.role?e.createElement(it,null):e.createElement(rt,{to:"/login",replace:!0}))};var an="/assets/logo.a2115b28.jpg";const nn=({title:t,children:a,to:r})=>{const s=ra(),[l,n]=Ie();return e.createElement(mt,{to:r,style:{textDecoration:"none"}},e.createElement(rn,{$active:s.pathname===r,title:t,theme:n},a,t))},rn=Ve("div",t=>({padding:"1rem 2rem",background:t.$active?t.theme.colors.primary100:"none",display:"flex",alignItems:"center",justifyContent:"flex-start",fontSize:"1rem",color:t.$active?t.theme.colors.primary700:t.theme.colors.primary600,cursor:"pointer",borderLeft:t.$active?"4px solid #DDE2FF":"none",":hover":{background:t.theme.colors.primary100,color:t.theme.colors.primary600,borderLeft:"4px solid #DDE2FF"}})),sn=({open:t,setOpen:a,menuData:r})=>{const[s,l]=Ie(),n=Ve("section",{position:"fixed",top:"0",left:"0",width:"100%",maxWidth:"300px",height:"100vh",background:"white",overflowX:"hidden"}),c=Ve("div",{padding:"1rem 2.5rem",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.25rem",textAlign:"center",color:l.colors.primary600,fontWeight:"bold",boxSizing:"border-box",background:"none",margin:"1rem 1rem",borderBottom:`solid ${l.colors.primary400} .1rem`});return e.createElement(n,{className:s({"@media (max-width: 768px)":{display:t?"block":"none"}})},e.createElement("div",{className:s({position:"fixed",top:"0",left:"0",width:"100vw",background:"white",opacity:"0.5",height:"100vh",zIndex:"-1",display:"none","@media (max-width: 768px)":{display:t?"block":"none"}}),onClick:()=>a(!1)}),e.createElement(c,null,e.createElement("img",{className:s({width:"8.5rem",height:"7rem",marginRight:"0.5rem"}),src:an,alt:"logo"})),r.map(({icon:i,title:p,active:f,to:g})=>e.createElement(nn,{key:g,active:f,to:g,title:p},i)))},ln=({open:t,setOpen:a,title:r})=>{const{metadata:{email:s,fullname:l,studentId:n,advisorId:c,companyName:i,profilePicture:p,role:f},logout:g}=ze(),[o,h]=Ie();return e.createElement(Lt,{className:o({width:"100%",borderBottom:"none !important","@media (max-width: 768px)":{paddingLeft:"0"}})},e.createElement(Oe,{$align:je.left},e.createElement(st,{className:o({fontSize:"1.5rem"})},e.createElement("div",{className:o({display:"none","@media (max-width: 768px)":{display:"block"}})},e.createElement(sa,{size:"2rem",className:o({background:h.colors.primary100,padding:".4rem",borderRadius:"10%"}),onClick:()=>a(!t)})),e.createElement("span",{className:o({display:"block",color:h.colors.primary,"@media (max-width: 768px)":{display:"none"}})},r||"Page"))),e.createElement(Oe,{$align:je.center}),e.createElement(Oe,{$align:je.right},e.createElement(st,null,e.createElement(Dt,{placement:At.bottom,showArrow:!0,content:()=>e.createElement(He,{width:"250px"},e.createElement(Y,{size:"compact",kind:"tertiary",overrides:{BaseButton:{style:()=>({width:"100%"})}},onClick:g},"Logout"))},e.createElement(Y,{overrides:{BaseButton:{style:()=>({backgroundColor:"transparent",paddingLeft:"0px",paddingRight:"0px",paddingTop:"0px",paddingBottom:"0px",":hover":{backgroundColor:"transparent"}})}}},e.createElement(la,{item:{fullname:l,profilePicture:p,email:s,companyName:i,advisorId:c,studentId:n,role:f},getProfileItemLabels:({fullname:b,email:q,companyName:L,advisorId:v,studentId:u,role:$})=>({title:b,subtitle:q,body:u||L||v||$}),getProfileItemImg:b=>b.profilePicture||"https://via.placeholder.com/60x60",getProfileItemImgText:b=>b.fullname}))))))},on=({children:t})=>{const[a]=Ie();return e.createElement("div",{className:a({width:"100%",borderRadius:"0.5rem",padding:"10px",background:"#fff",minHeight:"90vh",border:"1px solid #DFE0EB",overflow:"hidden","@media (max-width: 768px)":{margin:"0 1.5rem"}})},t)},Mt=({children:t,title:a,menu:r})=>{const[s,l]=e.useState(!1);return e.createElement(cn,null,e.createElement(sn,{open:s,setOpen:l,menuData:r}),e.createElement(ln,{open:s,setOpen:l,title:a}),e.createElement(on,null,t))},cn=Ve("section",{display:"flex",flexDirection:"column",alignItems:"flex-start",position:"relative",paddingLeft:"320px",paddingRight:"2rem",width:"100%",minHeight:"100vh",maxWidth:"100vw",boxSizing:"border-box","@media (max-width: 768px)":{paddingLeft:"0"}}),Pt=({role:t})=>{const{metadata:{role:a}}=ze();return e.createElement(e.Fragment,null,t===a?e.createElement(it,null):e.createElement(rt,{to:"/unauthorized",replace:!0}))},mn=[{title:"Schedules",icon:e.createElement(Ft,{style:{marginRight:"0.5rem"}}),to:"/app/admin"},{title:"Departments",icon:e.createElement(oa,{style:{marginRight:"0.5rem"}}),to:"/app/admin/departments"},{title:"Sections",icon:e.createElement(dt,{style:{marginRight:"0.5rem"}}),to:"/app/admin/sections"},{title:"Courses",icon:e.createElement(ca,{style:{marginRight:"0.5rem"}}),to:"/app/admin/courses"},{title:"Classrooms",icon:e.createElement(ia,{style:{marginRight:"0.5rem"}}),to:"/app/admin/classrooms"},{title:"Teachers",icon:e.createElement(ma,{style:{marginRight:"0.5rem"}}),to:"/app/admin/teachers"},{title:"Students",icon:e.createElement(dt,{style:{marginRight:"0.5rem"}}),to:"/app/admin/students"},{title:"Create Admin Account",icon:e.createElement(dt,{style:{marginRight:"0.5rem"}}),to:"/app/admin/new-admin"}],dn=()=>e.createElement(Mt,{menu:mn,title:"College Class Scheduling System"},e.createElement(Pt,{role:"ADMIN"})),un=[{title:"Schedule",icon:e.createElement(Ft,{style:{marginRight:"0.5rem"}}),to:"/app/teacher"},{title:"Attendance",icon:e.createElement(da,{style:{marginRight:"0.5rem"}}),to:"/app/teacher/attendances"}],pn=()=>e.createElement(Mt,{menu:un,title:"College Class Scheduling System"},e.createElement(Pt,{role:"TEACHER"})),gn=()=>{const{metadata:{role:t}}=ze();switch(t){case"TEACHER":return e.createElement(rt,{to:"/app/teacher",replace:!0});case"ADMIN":return e.createElement(rt,{to:"/app/admin",replace:!0});default:return e.createElement(it,null)}};var hn="/assets/illustration-3.3c64ca89.svg",En="/assets/illustration-5.92fcdb55.svg",Rt="/assets/illustration-6.9444b30a.svg",fn="/assets/illustration-7.e14e93fc.svg";const yn=()=>{const t=U();return e.createElement(e.Fragment,null,e.createElement("section",{class:"slice py-7"},e.createElement("div",{class:"container"},e.createElement("div",{class:"row row-grid align-items-center"},e.createElement("div",{class:"col-12 col-md-5 col-lg-6 order-md-2 text-center"},e.createElement("figure",{class:"w-100"},e.createElement("img",{alt:"Image placeholder",src:hn,class:"img-fluid mw-md-120"}))),e.createElement("div",{class:"col-12 col-md-7 col-lg-6 order-md-1 pr-md-5"},e.createElement("h1",{class:"display-4 text-center text-md-left mb-3"},"It's time to Manage your ",e.createElement("strong",{class:"text-primary"},"schedule")),e.createElement("p",{class:"lead text-center text-md-left text-muted"},"College Class Scheduling System with Integrated Attendance"),e.createElement("div",{class:"text-center text-md-left mt-5"},e.createElement("a",{onClick:()=>{t("/login")},class:"btn btn-primary btn-icon"},e.createElement("span",{class:"btn-inner--text"},"Get started"),e.createElement("span",{class:"btn-inner--icon"},e.createElement("i",{"data-feather":"chevron-right"})))))))),e.createElement("section",{class:"slice slice-lg pt-lg-6 pb-0 pb-lg-6 bg-section-secondary"},e.createElement("div",{class:"container"},e.createElement("div",{class:"row mb-5 justify-content-center text-center"},e.createElement("div",{class:"col-lg-6"},e.createElement("span",{class:"badge badge-soft-success badge-pill badge-lg"},"Get started"),e.createElement("h2",{class:" mt-4"},"College Class Scheduling System with Integrated Attendance"),e.createElement("div",{class:"mt-2"},e.createElement("p",{class:"lead lh-180"},"Manage your schedules in one place!")))),e.createElement("div",{class:"row mt-5"},e.createElement("div",{class:"col-md-4"},e.createElement("div",{class:"card"},e.createElement("div",{class:"card-body pb-5"},e.createElement("div",{class:"pt-4 pb-5"},e.createElement("img",{src:fn,class:"img-fluid img-center",style:{height:150},alt:"Illustration"})),e.createElement("h5",{class:"h4 lh-130 mb-3"},"Automatic Scheduling"),e.createElement("p",{class:"text-muted mb-0"},"Can generate a schedule for you automatically. No mannual work needed!")))),e.createElement("div",{class:"col-md-4"},e.createElement("div",{class:"card"},e.createElement("div",{class:"card-body pb-5"},e.createElement("div",{class:"pt-4 pb-5"},e.createElement("img",{src:En,class:"img-fluid img-center",style:{height:150},alt:"Illustration"})),e.createElement("h5",{class:"h4 lh-130 mb-3"},"Integrated Attendance"),e.createElement("p",{class:"text-muted mb-0"},"Teachers can take attendance right from the application")))),e.createElement("div",{class:"col-md-4"},e.createElement("div",{class:"card"},e.createElement("div",{class:"card-body pb-5"},e.createElement("div",{class:"pt-4 pb-5"},e.createElement("img",{src:Rt,class:"img-fluid img-center",style:{height:150},alt:"Illustration"})),e.createElement("h5",{class:"h4 lh-130 mb-3"},"Get more done"),e.createElement("p",{class:"text-muted mb-0"},"An easy way to manage your class schedules"))))))))},bn={email:ne().email().required("Email is required"),password:ne().required("Password is required")},Cn=({email:t,password:a,onSubmit:r,isLoading:s})=>{const{values:l,errors:n,touched:c,handleChange:i,handleBlur:p,handleSubmit:f}=fe({validationSchema:ye().shape(F({},bn)),initialValues:{email:t||"",password:a||""},onSubmit:g=>{g.email&&g.password&&r&&r(g)}});return e.createElement(e.Fragment,null,e.createElement(w,{label:"Email",error:n.email},e.createElement(K,{disabled:s,id:"email",type:"email",onChange:i,onBlur:p,value:l.email})),e.createElement(w,{label:"Password",error:n.password},e.createElement(K,{disabled:s,id:"password",type:"password",onChange:i,onBlur:p,value:l.password})),e.createElement(Y,{type:"button",id:"save",overrides:{BaseButton:{style:()=>({width:"100%"})}},onClick:()=>{f()},isLoading:s},"Login"))},$t={display:"flex"},Sn=()=>{const[t,a]=Ie(),{login:{request:r,loading:s}}=ze();return e.createElement(Ee,{flexGridColumnCount:[1,1,2,2],flexGridColumnGap:"10px",flexGridRowGap:"10px",margin:"10px"},e.createElement(T,F({},$t),e.createElement(He,{width:"100%",margin:"auto"},e.createElement("img",{className:t({width:"100%"}),src:Rt,alt:"logo"}))),e.createElement(T,F({},$t),e.createElement(He,{width:"90%",margin:"auto"},e.createElement("h2",{className:t({fontFamily:"Poppins",fontStyle:"normal",color:a.colors.primary600,fontWeight:500,textAlign:"center",fontSize:"32px",lineHeight:"48px"})},"Login to your account"),e.createElement(Cn,{onSubmit:r,isLoading:s}))))};var Gt="/assets/banner.b228d0b3.svg";const xn=()=>{const[t,a]=Ie();return e.createElement(He,{width:["100%","100%","50%","30%"],margin:"auto"},e.createElement("img",{className:t({width:"100%"}),src:Gt,alt:"logo"}),e.createElement("h2",{className:t({fontFamily:"Poppins",fontStyle:"normal",color:a.colors.primary600,fontWeight:500,textAlign:"center",fontSize:"32px",lineHeight:"48px"})},"Page Not Found"),e.createElement(mt,{to:"/",className:t({marginLeft:"50%"})},"Home"))},$n=()=>{const[t,a]=Ie();return e.createElement(He,{width:["100%","100%","50%","30%"],margin:"auto"},e.createElement("img",{className:t({width:"100%"}),src:Gt,alt:"logo"}),e.createElement("h2",{className:t({fontFamily:"Poppins",fontStyle:"normal",color:a.colors.primary600,fontWeight:500,textAlign:"center",fontSize:"32px",lineHeight:"48px"})},"You are not authorized to access this resource!"),e.createElement(mt,{to:"/",className:t({marginLeft:"50%"})},"Home"))};function zt({title:t,actions:a,sub:r}){const s={Block:{style:({$theme:l})=>({color:l.colors.primary,margin:"0px"})}};return e.createElement(Lt,null,e.createElement(Oe,{$align:je.left},e.createElement(st,null,r?e.createElement(ua,{overrides:s},t):e.createElement(pa,{overrides:s},t))),e.createElement(Oe,{$align:je.center}),a&&a.length&&e.createElement(Oe,{$align:je.right},e.createElement(st,null,a.map(({link:l,handler:n,name:c,kind:i})=>e.createElement(e.Fragment,null," ",n?e.createElement(Y,{onClick:n,kind:i,overrides:{BaseButton:{style:({$theme:p})=>({marginLeft:p.sizing.scale200,marginRight:p.sizing.scale200})}}},c):e.createElement(mt,{style:{textDecoration:"none"},key:l,to:l},e.createElement(Y,{overrides:{BaseButton:{style:({$theme:p})=>({marginLeft:p.sizing.scale200,marginRight:p.sizing.scale200})}}},c)))))))}const qn=Ve("div",{padding:"20px"}),vn=()=>e.createElement(e.Fragment,null,e.createElement(bt,{animation:!0,rows:2,width:"100%",overrides:{Row:{style:{height:"20px",marginBottom:"15px"}}}}),e.createElement(bt,{width:"100%",height:"70vh",animation:!0}));function Z({title:t,actions:a,children:r,isLoading:s,error:l}){const n={Body:{style:{width:"auto",margin:"1rem .5rem"}}};return e.createElement(e.Fragment,null," ",s&&e.createElement(vn,null),l&&e.createElement(Ne,{kind:"negative",overrides:n},"Something went wrong: ",l),!s&&!l&&e.createElement(e.Fragment,null,e.createElement(zt,{title:t,actions:a}),e.createElement(qn,null,r)))}const wn={height:"scale1000",display:"flex"},qt=({department:t,sections:a,path:r})=>{const s=U();return e.createElement(e.Fragment,null,e.createElement(De,{title:t},e.createElement(Ae,null,e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"5px",flexGridRowGap:"5px"},a.map(({id:l,label:n})=>e.createElement(T,F({key:l},wn),e.createElement(Y,{startEnhancer:()=>e.createElement(ga,{size:24}),kind:"tertiary",onClick:()=>{s(`/app/admin/${r||"section"}/${l}`)}},n)))))))};var be={all:()=>I.get("schedules"),getById:t=>I.get(`schedules/${t}`),getByIdAttendance:t=>I.get(`schedules/attendance/${t}`),create:t=>I.post("schedules",t),createReserved:t=>I.post("schedules/reserved",t),bulk:t=>I.post("schedules/bulk",t),generate:t=>I.post("schedules/generate",t),allBySection:t=>I.get(`schedules/section/${t}`),allByClassroom:t=>I.get(`schedules/classroom/${t}`),allByTeacher:t=>I.get(`schedules/teacher/${t}`),delete:t=>I.delete(`schedules/${t}`),update:(t,a)=>I.put(`schedules/${t}`,a)},Le={all:()=>I.get("courses"),allByDepartment:t=>I.get(`courses/department/${t}`),getById:t=>I.get(`courses/${t}`),delete:t=>I.delete(`courses/${t}`),create:t=>I.post("courses",t),update:(t,a)=>I.put(`courses/${t}`,a)},ke={all:()=>I.get("teachers"),allSlot:()=>I.get("teachers/slot"),allByDepartment:t=>I.get(`teachers/department/${t}`),allByDepartmentSlot:(t,a,r)=>I.get(`teachers/department-slot/${t}?year=${a}&semester=${r}`),getById:t=>I.get(`teachers/${t}`),delete:t=>I.delete(`teachers/${t}`),create:t=>I.post("teachers",t),update:(t,a)=>I.put(`teachers/${t}`,a)},pe={all:()=>I.get("departments"),getById:t=>I.get(`departments/${t}`),delete:t=>I.delete(`departments/${t}`),create:t=>I.post("departments",t),update:(t,a)=>I.put(`departments/${t}`,a)},$e={all:()=>I.get("sections"),allSlot:()=>I.get("sections/slot"),allByDepartmentSlot:(t,a,r)=>I.get(`sections/department-slot/${t}?year=${a}&semester=${r}`),getById:t=>I.get(`sections/${t}`),delete:t=>I.delete(`sections/${t}`),create:t=>I.post("sections",t),update:(t,a)=>I.put(`sections/${t}`,a)},Be={all:()=>I.get("classrooms"),allSlot:()=>I.get("classrooms/slot"),allByDepartmentSlot:(t,a,r)=>I.get(`classrooms/department-slot/${t}?year=${a}&semester=${r}`),getById:t=>I.get(`classrooms/${t}`),delete:t=>I.delete(`classrooms/${t}`),create:t=>I.post("classrooms",t),update:(t,a)=>I.put(`classrooms/${t}`,a)};const gt=(t,a,r)=>{const s=Array(t.length).fill(!1);for(let l=0;l<s.length;l++)s[l]=t[l]||a[l]||r[l];return s};function kn(t,a,r){for(var s=1,l=t;l<a.length;l++)if(a[l]===r)s++;else return s;return s}const Te=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00"],ht=(t,a)=>{const r=t*2,s=[9,10],l=[];for(let n=0;n<a.length;n++)if(kn(n,a,!1)>=r){const i=n,p=n+r-1,f=[];for(let o=i;o<=p;o++)f.push(o);s.some(o=>f.includes(o))||l.push(f)}return l},Bn={course:V().required("Course is required"),type:V().required("Course type is required"),teachers:V().required("Teachers are required"),year:Se().required("Year is required"),semester:Se().required("Semester is required"),department:V().required("Department is required"),sections:V().required("Sections are required"),classrooms:V().required("Classrooms are required"),weekday:V().required("Weekday is required"),slots:V().required("Time slot is required"),duration:Se().required("Duration is required").min(1).max(4).integer()},Ot=({year:t,semester:a,isOpen:r,setIsOpen:s,isLoading:l,onSubmit:n})=>{const{loading:c,request:i}=x(pe.all,{onComplete:m=>{M(m.map(({id:O,name:_})=>({id:O,label:_})))}}),{loading:p,request:f}=x($e.allByDepartmentSlot,{onComplete:m=>{h(m)}}),{loading:g,request:o}=x(Be.allByDepartmentSlot,{onComplete:m=>{b(m)}}),h=m=>{const O=m.map(({id:_,name:C,year:W,slot:X})=>({id:_,label:`${C} [${W} batch]`,slot:X}));Q(O)},b=m=>{const O=m.map(({id:_,name:C,type:W,slot:X})=>({id:_,label:`${C} [${W}]`,type:W,slot:X}));S(O)},q=(m,O)=>{if(y.classrooms.length&&y.teachers.length&&y.sections.length){const _=y.classrooms[0].slot[m],C=y.sections[0].slot[m],W=y.teachers[0].slot[m],X=gt(_,W,C),me=ht(O,X),oe=[];for(const le of me){const Ce=new Date(`2018-11-01T${Te[le[0]]}`),we=new Date(`2018-11-01T${Te[le[le.length-1]+1]}`);oe.push({id:le.join(","),label:`${Ce.toLocaleTimeString()} - ${we.toLocaleTimeString()}`})}se(oe)}},{loading:L,request:v}=x(Le.allByDepartment,{errorMessage:"could not load data",onComplete:m=>{k(m.map(({id:O,name:_})=>({id:O,label:_})))}}),{loading:u,request:$}=x(ke.allByDepartmentSlot,{errorMessage:"could not load data",onComplete:m=>{H(m.map(({id:O,user:{fullname:_},slot:C})=>({id:O,label:_,slot:C})))}}),D=l||c||p||g||L||u,[A,k]=d.exports.useState([]),[B,H]=d.exports.useState([]),[E,M]=d.exports.useState([]),[P,Q]=d.exports.useState([]),[N,S]=d.exports.useState([]),[J,se]=d.exports.useState([]);d.exports.useEffect(()=>{r?i():de()},[r]);const{values:y,errors:G,touched:ue,handleChange:z,handleBlur:re,handleSubmit:Fe,setFieldValue:ee,resetForm:de}=fe({validationSchema:ye().shape(F({},Bn)),initialValues:{duration:"",year:t||"",semester:a||"",teachers:[],classrooms:[],sections:[],weekday:[]},onSubmit:m=>{if(n){const O=m.course[0].label,_=m.type[0].id,C=m.sections[0].id,W=m.year,X=m.semester,me=m.teachers[0].id,oe=m.classrooms[0].id,le=m.weekday[0].id,Ce=m.slots[0].id;_!==m.classrooms[0].type?confirm(`The course you are adding is a ${_} class but the classroom is ${m.classrooms[0].type}. Are you sure you want to continue?`)&&n({name:`${O} [${_}]`,section:C,year:W,semester:X,teacher:me,classroom:oe,slots:Ce,weekday:le}):n({name:`${O} [${_}]`,section:C,year:W,semester:X,teacher:me,classroom:oe,slots:Ce,weekday:le})}}});return d.exports.useEffect(()=>{y.duration&&y.weekday.length>0&&q(y.weekday[0].id,y.duration)},[y]),e.createElement(e.Fragment,null,e.createElement(Ye,{onClose:()=>{s(!1)},isOpen:r,size:"auto"},e.createElement(We,null,"Add Class to Schedule"),e.createElement(_e,null,e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Year",error:G.year},e.createElement(K,{disabled:D,id:"year",type:"number",onChange:z,onBlur:re,value:y.year}))),e.createElement(T,null,e.createElement(w,{label:"Semester",error:G.semester},e.createElement(K,{disabled:D,id:"semester",type:"number",onChange:z,onBlur:re,value:y.semester})))),e.createElement(w,{label:"Department",error:E&&E.length?G.department:"No Departments found"},e.createElement(j,{disabled:D||!y.year||!y.semester,id:"department",options:E,onChange:({value:m})=>{m&&m.length&&(ee("department",m),ee("sections",[]),ee("classrooms",[]),f(m[0].id,y.year,y.semester),o(m[0].id,y.year,y.semester),$(m[0].id,y.year,y.semester),v(m[0].id))},value:y.department})),e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Section",error:P&&P.length?G.sections:"No Sections found"},e.createElement(j,{disabled:D,id:"sections",options:P,onChange:({value:m})=>{m&&m.length&&ee("sections",m)},value:y.sections}))),e.createElement(T,null,e.createElement(w,{label:"Classroom",error:N&&N.length?G.classrooms:"No Classrooms found"},e.createElement(j,{disabled:D,id:"classrooms",options:N,onChange:({value:m})=>{m&&m.length&&ee("classrooms",m)},value:y.classrooms}))),e.createElement(T,null,e.createElement(w,{label:"Course",error:A&&A.length?G.course:"No Courses found"},e.createElement(j,{disabled:D,id:"course",options:A,onChange:({value:m})=>{m&&m.length&&ee("course",m)},value:y.course}))),e.createElement(T,null,e.createElement(w,{label:"Type",error:G.type},e.createElement(j,{disabled:D,id:"type",options:[{id:"LECTURE",label:"Lecture"},{id:"LAB",label:"Lab"}],onChange:({value:m})=>{m&&m.length&&ee("type",m)},value:y.type}))),e.createElement(T,null,e.createElement(w,{label:"Duration in hours",error:G.duration},e.createElement(K,{disabled:D,id:"duration",type:"number",onChange:z,onBlur:re,value:y.duration}))),e.createElement(T,null,e.createElement(w,{label:"Teacher",error:B&&B.length?G.teachers:"No Teachers found"},e.createElement(j,{disabled:D,id:"teachers",options:B,onChange:({value:m})=>{m&&m.length&&ee("teachers",m)},value:y.teachers}))),e.createElement(T,null,e.createElement(w,{label:"Week Day",error:G.weekday},e.createElement(j,{disabled:D,id:"weekday",options:[{id:0,label:"Monday"},{id:1,label:"Tuesday"},{id:2,label:"Wednsday"},{id:3,label:"Thursday"},{id:4,label:"Friday"},{id:5,label:"Saturday"}],onChange:({value:m})=>{m&&m.length&&ee("weekday",m)},value:y.weekday}))),e.createElement(T,null,e.createElement(w,{label:"Time Slot",error:G.slots},e.createElement(j,{disabled:D,id:"slots",options:J,onChange:({value:m})=>{m&&m.length&&ee("slots",m)},value:y.slots}))))),e.createElement(Ke,null,e.createElement(Je,{overrides:{BaseButton:{style:{width:"100%"}}},isLoading:D,onClick:()=>{Fe()}},"Add"))))},vt={display:"flex",minWidth:"200px"},Ln={Body:{style:{width:"auto",margin:"1rem .5rem"}}},Dn=()=>{const[t,a]=d.exports.useState([]),[r,s]=d.exports.useState([]);d.exports.useState([]);const l=b=>{const q=b.filter(({section:u,classroom:$,teacher:D})=>u&&$&&D).map(u=>ce(F({},u),{department:u.section.department.name,id:u.section.id,label:`${u.section.name} [${u.section.year} batch]`})),L={};for(const u of q)L[u.id]=u;const v={};for(const u of Object.values(L))v[u.department]?v[u.department].push(u):v[u.department]=[u];return Object.entries(v).map(([u,$])=>({department:u,sections:$}))},n=b=>{const q=b.filter(({section:u,classroom:$,teacher:D})=>u&&$&&D).map(u=>ce(F({},u),{department:u.section.department.name,id:u.classroom.id,label:`${u.classroom.name}`})),L={};for(const u of q)L[u.id]=u;const v={};for(const u of Object.values(L))v[u.department]?v[u.department].push(u):v[u.department]=[u];return Object.entries(v).map(([u,$])=>({department:u,list:$}))},{request:c,loading:i,error:p}=x(be.all,{onComplete:b=>{a(l(b)),s(n(b))}}),{loading:f,request:g}=x(be.create,{onComplete:()=>{h(!1),c()},errorMessage:"Could not add!",successMessage:"added!"});d.exports.useEffect(()=>{c()},[]);const[o,h]=d.exports.useState(!1);return e.createElement(Z,{error:p,isLoading:i,title:"Schedules",actions:[{name:"Generate Schedule",link:"/app/admin/generate-schedule"},{name:"Schedule a Class",handler:()=>{h(!0)}}]},e.createElement(Ot,{isOpen:o,setIsOpen:h,isLoading:f,onSubmit:b=>{g&&g(b)}}),t&&t.length<1&&e.createElement(Ne,{overrides:Ln},"No schedules avaliable"),t&&t.length>0&&e.createElement(e.Fragment,null," ",e.createElement(Z,{title:"Sections"},e.createElement(Ee,{flexGridColumnCount:[1,1,2,2],flexGridColumnGap:"1px",flexGridRowGap:"1px"},t.map(({department:b,sections:q})=>e.createElement(T,F({key:b},vt),e.createElement(qt,{department:b,sections:q,path:"section"})," ")))),e.createElement(Z,{title:"Classrooms"},e.createElement(Ee,{flexGridColumnCount:[1,1,2,2],flexGridColumnGap:"1px",flexGridRowGap:"1px"},r.map(({department:b,list:q})=>e.createElement(T,F({key:b},vt),e.createElement(qt,{department:b,sections:q,path:"classroom"})," "))))))},An={course:V().required("Course is required"),type:V().required("Course type is required"),teachers:V().required("Teachers are required"),year:Se().required("Year is required"),date:ne().required("Date is required"),semester:Se().required("Semester is required"),department:V().required("Department is required"),sections:V().required("Sections are required"),classrooms:V().required("Classrooms are required"),weekday:Se().required("Weekday is required"),slots:V().required("Time slot is required"),duration:Se().required("Duration is required").min(1).max(4).integer()},Fn=[-1,0,1,2,3,4,5],In=({year:t,semester:a,isOpen:r,setIsOpen:s,isLoading:l,onSubmit:n})=>{const{loading:c,request:i}=x(pe.all,{onComplete:m=>{M(m.map(({id:O,name:_})=>({id:O,label:_})))}}),{loading:p,request:f}=x($e.allByDepartmentSlot,{onComplete:m=>{h(m)}}),{loading:g,request:o}=x(Be.allByDepartmentSlot,{onComplete:m=>{b(m)}}),h=m=>{const O=m.map(({id:_,name:C,year:W,slot:X})=>({id:_,label:`${C} [${W} batch]`,slot:X}));Q(O)},b=m=>{const O=m.map(({id:_,name:C,type:W,slot:X})=>({id:_,label:`${C} [${W}]`,type:W,slot:X}));S(O)},q=(m,O)=>{if(y.classrooms.length&&y.teachers.length&&y.sections.length){const _=y.classrooms[0].slot[m],C=y.sections[0].slot[m],W=y.teachers[0].slot[m],X=gt(_,W,C),me=ht(O,X),oe=[];for(const le of me){const Ce=new Date(`2018-11-01T${Te[le[0]]}`),we=new Date(`2018-11-01T${Te[le[le.length-1]+1]}`);oe.push({id:le.join(","),label:`${Ce.toLocaleTimeString()} - ${we.toLocaleTimeString()}`})}se(oe)}},{loading:L,request:v}=x(Le.allByDepartment,{errorMessage:"could not load data",onComplete:m=>{k(m.map(({id:O,name:_})=>({id:O,label:_})))}}),{loading:u,request:$}=x(ke.allByDepartmentSlot,{errorMessage:"could not load data",onComplete:m=>{H(m.map(({id:O,user:{fullname:_},slot:C})=>({id:O,label:_,slot:C})))}}),D=l||c||p||g||L||u,[A,k]=d.exports.useState([]),[B,H]=d.exports.useState([]),[E,M]=d.exports.useState([]),[P,Q]=d.exports.useState([]),[N,S]=d.exports.useState([]),[J,se]=d.exports.useState([]);d.exports.useEffect(()=>{r?i():de()},[r]);const{values:y,errors:G,touched:ue,handleChange:z,handleBlur:re,handleSubmit:Fe,setFieldValue:ee,resetForm:de}=fe({validationSchema:ye().shape(F({},An)),initialValues:{duration:"",year:t||"",semester:a||"",teachers:[],classrooms:[],sections:[],weekday:""},onSubmit:m=>{if(n){const O=m.course[0].label,_=m.type[0].id,C=m.sections[0].id,W=m.year,X=m.semester,me=m.teachers[0].id,oe=m.classrooms[0].id,le=m.weekday,Ce=m.date,we=m.slots[0].id;_!==m.classrooms[0].type?confirm(`The course you are adding is a ${_} class but the classroom is ${m.classrooms[0].type}. Are you sure you want to continue?`)&&n({name:`[MAKEUP] ${O} [${_}]`,section:C,year:W,date:Ce,semester:X,teacher:me,classroom:oe,slots:we,weekday:le,makeup:!0}):n({name:`[MAKEUP] ${O} [${_}]`,section:C,year:W,date:Ce,semester:X,teacher:me,classroom:oe,slots:we,weekday:le,makeup:!0})}}});return d.exports.useEffect(()=>{y.duration&&y.weekday&&q(y.weekday,y.duration)},[y]),e.createElement(e.Fragment,null,e.createElement(Ye,{onClose:()=>{s(!1)},isOpen:r,size:"auto"},e.createElement(We,null,"Add Makeup Class"),e.createElement(_e,null,e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Year",error:G.year},e.createElement(K,{disabled:D,id:"year",type:"number",onChange:z,onBlur:re,value:y.year}))),e.createElement(T,null,e.createElement(w,{label:"Semester",error:G.semester},e.createElement(K,{disabled:D,id:"semester",type:"number",onChange:z,onBlur:re,value:y.semester})))),e.createElement(w,{label:"Department",error:E&&E.length?G.department:"No Departments found"},e.createElement(j,{disabled:D||!y.year||!y.semester,id:"department",options:E,onChange:({value:m})=>{m&&m.length&&(ee("department",m),ee("sections",[]),ee("classrooms",[]),f(m[0].id,y.year,y.semester),o(m[0].id,y.year,y.semester),$(m[0].id,y.year,y.semester),v(m[0].id))},value:y.department})),e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Section",error:P&&P.length?G.sections:"No Sections found"},e.createElement(j,{disabled:D,id:"sections",options:P,onChange:({value:m})=>{m&&m.length&&ee("sections",m)},value:y.sections}))),e.createElement(T,null,e.createElement(w,{label:"Classroom",error:N&&N.length?G.classrooms:"No Classrooms found"},e.createElement(j,{disabled:D,id:"classrooms",options:N,onChange:({value:m})=>{m&&m.length&&ee("classrooms",m)},value:y.classrooms}))),e.createElement(T,null,e.createElement(w,{label:"Course",error:A&&A.length?G.course:"No Courses found"},e.createElement(j,{disabled:D,id:"course",options:A,onChange:({value:m})=>{m&&m.length&&ee("course",m)},value:y.course}))),e.createElement(T,null,e.createElement(w,{label:"Type",error:G.type},e.createElement(j,{disabled:D,id:"type",options:[{id:"LECTURE",label:"Lecture"},{id:"LAB",label:"Lab"}],onChange:({value:m})=>{m&&m.length&&ee("type",m)},value:y.type}))),e.createElement(T,null,e.createElement(w,{label:"Duration in hours",error:G.duration},e.createElement(K,{disabled:D,id:"duration",type:"number",onChange:z,onBlur:re,value:y.duration}))),e.createElement(T,null,e.createElement(w,{label:"Teacher",error:B&&B.length?G.teachers:"No Teachers found"},e.createElement(j,{disabled:D,id:"teachers",options:B,onChange:({value:m})=>{m&&m.length&&ee("teachers",m)},value:y.teachers}))),e.createElement(T,null,e.createElement(w,{label:"Date",error:G.date||G.weekday},e.createElement(pt,{disabled:D,onChange:({date:m})=>{ee("date",m),ee("weekday",Fn[new Date(m).getDay()])}}))),e.createElement(T,null,e.createElement(w,{label:"Time Slot",error:G.slots},e.createElement(j,{disabled:D,id:"slots",options:J,onChange:({value:m})=>{m&&m.length&&ee("slots",m)},value:y.slots}))))),e.createElement(Ke,null,e.createElement(Je,{overrides:{BaseButton:{style:{width:"100%"}}},isLoading:D,onClick:()=>{Fe()}},"Add"))))},Nn={course:V().required("Course is required"),type:V().required("Course type is required"),teachers:V().required("Teachers are required"),year:Se().required("Year is required"),date:ne().required("Date is required"),semester:Se().required("Semester is required"),department:V().required("Department is required"),sections:V().required("Sections are required"),classrooms:V().required("Classrooms are required"),weekday:Se().required("Weekday is required"),slots:V().required("Time slot is required"),duration:Se().required("Duration is required").min(1).max(4).integer()},Tn=[-1,0,1,2,3,4,5],Mn=({teacher:t,department:a,section:r,year:s,semester:l,isOpen:n,setIsOpen:c,isLoading:i,onSubmit:p})=>{const{loading:f,request:g}=x(pe.all,{onComplete:C=>{N(C.map(({id:W,name:X})=>({id:W,label:X})))}}),{loading:o,request:h}=x($e.allByDepartmentSlot,{onComplete:C=>{L(C)}}),{loading:b,request:q}=x(Be.allByDepartmentSlot,{onComplete:C=>{v(C)}}),L=C=>{const W=C.map(({id:X,name:me,year:oe,slot:le})=>({id:X,label:`${me} [${oe} batch]`,slot:le}));J(W)},v=C=>{const W=C.map(({id:X,name:me,type:oe,slot:le})=>({id:X,label:`${me} [${oe}]`,type:oe,slot:le}));y(W)},u=(C,W)=>{if(z.classrooms.length&&z.teachers.length&&z.sections.length){const X=z.classrooms[0].slot[C],me=z.sections[0].slot[C],oe=z.teachers[0].slot[C],le=gt(X,oe,me),Ce=ht(W,le),we=[];for(const Pe of Ce){const Xe=new Date(`2018-11-01T${Te[Pe[0]]}`),Ze=new Date(`2018-11-01T${Te[Pe[Pe.length-1]+1]}`);we.push({id:Pe.join(","),label:`${Xe.toLocaleTimeString()} - ${Ze.toLocaleTimeString()}`})}ue(we)}},{loading:$,request:D}=x(Le.allByDepartment,{errorMessage:"could not load data",onComplete:C=>{E(C.map(({id:W,name:X})=>({id:W,label:X})))}}),{loading:A,request:k}=x(ke.allByDepartmentSlot,{errorMessage:"could not load data",onComplete:C=>{P(C.map(({id:W,user:{fullname:X},slot:me})=>({id:W,label:X,slot:me})))}}),B=i||f||o||b||$||A,[H,E]=d.exports.useState([]),[M,P]=d.exports.useState([]),[Q,N]=d.exports.useState([]),[S,J]=d.exports.useState([]),[se,y]=d.exports.useState([]),[G,ue]=d.exports.useState([]);d.exports.useEffect(()=>{n?(g(),a&&a.length&&s&&l&&(h(a[0].id,s,l),q(a[0].id,s,l),k(a[0].id,s,l),D(a[0].id))):_()},[n]);const{values:z,errors:re,touched:Fe,handleChange:ee,handleBlur:de,handleSubmit:m,setFieldValue:O,resetForm:_}=fe({validationSchema:ye().shape(F({},Nn)),initialValues:{duration:"",year:s||"",semester:l||"",teachers:t||[],classrooms:[],sections:r||[],department:a||[],weekday:""},onSubmit:C=>{if(p){const W=C.course[0].label,X=C.type[0].id,me=C.sections[0].id,oe=C.year,le=C.semester,Ce=C.teachers[0].id,we=C.classrooms[0].id,Pe=C.weekday,Xe=C.date,Ze=C.slots[0].id;X!==C.classrooms[0].type?confirm(`The course you are adding is a ${X} class but the classroom is ${C.classrooms[0].type}. Are you sure you want to continue?`)&&p({name:`[MAKEUP] ${W} [${X}]`,section:me,year:oe,date:Xe,semester:le,teacher:Ce,classroom:we,slots:Ze,weekday:Pe,makeup:!0}):p({name:`[MAKEUP] ${W} [${X}]`,section:me,year:oe,date:Xe,semester:le,teacher:Ce,classroom:we,slots:Ze,weekday:Pe,makeup:!0})}}});return d.exports.useEffect(()=>{if(r){const C=S.find(({id:W})=>W===r[0].id);C&&O("sections",[C])}if(t){const C=M.find(({id:W})=>W===t[0].id);C&&O("teachers",[C])}},[S,M]),d.exports.useEffect(()=>{z.duration&&z.weekday&&u(z.weekday,z.duration)},[z]),e.createElement(e.Fragment,null,e.createElement(Ye,{onClose:()=>{c(!1)},isOpen:n,size:"auto"},e.createElement(We,null,"Add Makeup Class"),e.createElement(_e,null,e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Year",error:re.year},e.createElement(K,{disabled:B,id:"year",type:"number",onChange:ee,onBlur:de,value:z.year}))),e.createElement(T,null,e.createElement(w,{label:"Semester",error:re.semester},e.createElement(K,{disabled:B,id:"semester",type:"number",onChange:ee,onBlur:de,value:z.semester})))),e.createElement(w,{label:"Department",error:Q&&Q.length?re.department:"No Departments found"},e.createElement(j,{disabled:B||!z.year||!z.semester,id:"department",options:Q,onChange:({value:C})=>{C&&C.length&&(O("department",C),O("sections",[]),O("classrooms",[]),h(C[0].id,z.year,z.semester),q(C[0].id,z.year,z.semester),k(C[0].id,z.year,z.semester),D(C[0].id))},value:z.department})),e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Section",error:S&&S.length?re.sections:"No Sections found"},e.createElement(j,{disabled:B,id:"sections",options:S,onChange:({value:C})=>{C&&C.length&&O("sections",C)},value:z.sections}))),e.createElement(T,null,e.createElement(w,{label:"Classroom",error:se&&se.length?re.classrooms:"No Classrooms found"},e.createElement(j,{disabled:B,id:"classrooms",options:se,onChange:({value:C})=>{C&&C.length&&O("classrooms",C)},value:z.classrooms}))),e.createElement(T,null,e.createElement(w,{label:"Course",error:H&&H.length?re.course:"No Courses found"},e.createElement(j,{disabled:B,id:"course",options:H,onChange:({value:C})=>{C&&C.length&&O("course",C)},value:z.course}))),e.createElement(T,null,e.createElement(w,{label:"Type",error:re.type},e.createElement(j,{disabled:B,id:"type",options:[{id:"LECTURE",label:"Lecture"},{id:"LAB",label:"Lab"}],onChange:({value:C})=>{C&&C.length&&O("type",C)},value:z.type}))),e.createElement(T,null,e.createElement(w,{label:"Duration in hours",error:re.duration},e.createElement(K,{disabled:B,id:"duration",type:"number",onChange:ee,onBlur:de,value:z.duration}))),e.createElement(T,null,e.createElement(w,{label:"Teacher",error:M&&M.length?re.teachers:"No Teachers found"},e.createElement(j,{disabled:B||!0,id:"teachers",options:M,onChange:({value:C})=>{C&&C.length&&O("teachers",C)},value:z.teachers}))),e.createElement(T,null,e.createElement(w,{label:"Date",error:re.date||re.weekday},e.createElement(pt,{disabled:B,onChange:({date:C})=>{O("date",C),O("weekday",Tn[new Date(C).getDay()])}}))),e.createElement(T,null,e.createElement(w,{label:"Time Slot",error:re.slots},e.createElement(j,{disabled:B,id:"slots",options:G,onChange:({value:C})=>{C&&C.length&&O("slots",C)},value:z.slots}))))),e.createElement(Ke,null,e.createElement(Je,{overrides:{BaseButton:{style:{width:"100%"}}},isLoading:B,onClick:()=>{m()}},"Add"))))},ct=["08:00","08:30","09:00","09:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00"],Pn=["MO","TU","WE","TH","FR","SA"],Re="Demo",ie={icon:`${Re}-icon`,textCenter:`${Re}-textCenter`,firstRoom:`${Re}-firstRoom`,secondRoom:`${Re}-secondRoom`,thirdRoom:`${Re}-thirdRoom`,header:`${Re}-header`,commandButton:`${Re}-commandButton`},Rn=s=>{var l=s,{children:t,style:a}=l,r=tt(l,["children","style"]);const n=r.data.style||{};return e.createElement(It.Appointment,ce(F({},r),{style:F(F({},a),n)}),t)};var jt=({by:t,department:a,teacher:r,section:s,schedules:l,title:n,year:c,semester:i,deleteRequest:p,addRequest:f,makeupRequest:g,isLoading:o,actions:h})=>{const L=[...(l||[]).filter(({date:N})=>{if(N){const S=new Date;return S.setHours(0,0,0,0),new Date(N)>=S}else return!0}).map(y=>{var G=y,{name:N,weekday:S,slots:J}=G,se=tt(G,["name","weekday","slots"]);return ce(F({},se),{style:{backgroundColor:se.makeup?"pink":se.reserved?"lightgray":N.toLowerCase().includes("[lab]")?"coral":"dogerblue"},startDate:`2018-11-01T${ct[J[0]]}`,endDate:`2018-11-01T${ct[J[J.length-1]+1]}`,title:N,rRule:`FREQ=WEEKLY;WKST=SU;BYDAY=${Pn[S]}`})}),{startDate:"2018-11-01T12:00",endDate:"2018-11-01T13:00",title:"Lunch Break",rRule:"FREQ=DAILY",style:{backgroundColor:"lightgray"}}],v=Ue(he)(()=>({[`&.${ie.textCenter}`]:{textAlign:"center"}})),u=Ue(ha)(({theme:{palette:N}})=>({[`&.${ie.icon}`]:{color:N.action.active}})),$=Ue(Ea)(({theme:{palette:N}})=>({[`&.${ie.icon}`]:{color:N.action.active}})),D=Ue(fa)(({theme:{palette:N}})=>({[`&.${ie.icon}`]:{color:N.action.active}})),A=Ue(ya)(({theme:{palette:N}})=>({[`&.${ie.icon}`]:{color:N.action.active}})),k=se=>{var y=se,{children:N,appointmentData:S}=y,J=tt(y,["children","appointmentData"]);var G,ue,z;return e.createElement(Ct.Content,ce(F({},J),{appointmentData:S}),S.makeup&&S.date&&e.createElement(he,{container:!0,alignItems:"center"},e.createElement(v,{item:!0,xs:2,className:ie.textCenter},e.createElement(D,{className:ie.icon})),e.createElement(he,{item:!0,xs:10},e.createElement("span",null,`Scheduled for: ${new Date(S.date).toDateString()}`))),S.classroom&&!S.reserved&&typeof S.classroom=="object"&&e.createElement(he,{container:!0,alignItems:"center"},e.createElement(v,{item:!0,xs:2,className:ie.textCenter},e.createElement(u,{className:ie.icon})),e.createElement(he,{item:!0,xs:10},e.createElement("span",null,((G=S==null?void 0:S.classroom)==null?void 0:G.name)||"-"))),S.classroomName&&!S.reserved&&e.createElement(he,{container:!0,alignItems:"center"},e.createElement(v,{item:!0,xs:2,className:ie.textCenter},e.createElement(u,{className:ie.icon})),e.createElement(he,{item:!0,xs:10},e.createElement("span",null,S.classroomName||"-"))),S.teacher&&typeof S.teacher=="object"&&e.createElement(he,{container:!0,alignItems:"center"},e.createElement(v,{item:!0,xs:2,className:ie.textCenter},e.createElement($,{className:ie.icon})),e.createElement(he,{item:!0,xs:10},e.createElement("span",null,((z=(ue=S==null?void 0:S.teacher)==null?void 0:ue.user)==null?void 0:z.fullname)||"-"))),S.teacherName&&e.createElement(he,{container:!0,alignItems:"center"},e.createElement(v,{item:!0,xs:2,className:ie.textCenter},e.createElement($,{className:ie.icon})),e.createElement(he,{item:!0,xs:10},e.createElement("span",null,S.teacherName||"-"))),S.section&&!S.reserved&&typeof S.section=="object"&&e.createElement(he,{container:!0,alignItems:"center"},e.createElement(v,{item:!0,xs:2,className:ie.textCenter},e.createElement(A,{className:ie.icon})),e.createElement(he,{item:!0,xs:10},e.createElement("span",null,`${S.section.department.id} ${S.section.name} [${S.section.year} batch]`))),S.sectionName&&!S.reserved&&e.createElement(he,{container:!0,alignItems:"center"},e.createElement(v,{item:!0,xs:2,className:ie.textCenter},e.createElement(A,{className:ie.icon})),e.createElement(he,{item:!0,xs:10},e.createElement("span",null,S.sectionName))),e.createElement(he,{container:!0,alignItems:"center"},p&&S.id&&S.title!=="Lunch Break"&&e.createElement(v,{item:!0,xs:2,className:ie.textCenter},e.createElement(Y,{size:"compact",shape:"pill",colors:{backgroundColor:"indianred",color:"white"},onClick:()=>{confirm("Are you sure, this action is permanent!")&&p(S.id)}},"Remove")),h&&h.length>0&&S.id&&!S.reserved&&e.createElement(v,{item:!0,xs:4,className:ie.textCenter},h.map(({name:re,handler:Fe,colors:ee})=>e.createElement(Y,{key:re,size:"compact",shape:"pill",colors:ee||{backgroundColor:"dodgerblue",color:"white"},overrides:{BaseButton:{style:({$theme:de})=>({marginLeft:de.sizing.scale200,marginRight:de.sizing.scale200})}},onClick:()=>{Fe(S)}},re)))))},[B,H]=d.exports.useState(!1),[E,M]=d.exports.useState(!1),[P,Q]=d.exports.useState(!1);return e.createElement(e.Fragment,null,e.createElement(Ot,{year:c,semester:i,isOpen:B,setIsOpen:H,isLoading:o,onSubmit:N=>{f&&f(N)}}),e.createElement(In,{year:c,semester:i,isOpen:E,setIsOpen:M,isLoading:o,onSubmit:N=>{g&&g(N)}}),e.createElement(Mn,{department:a,teacher:r,section:s,year:c,semester:i,isOpen:P,setIsOpen:Q,isLoading:o,onSubmit:N=>{g&&t==="teacher"&&g(N)}}),e.createElement(De,null,e.createElement(Ae,null,e.createElement(ve,{heading:n,endEnhancer:()=>e.createElement(e.Fragment,null,f&&e.createElement(Y,{size:"compact",shape:"pill",onClick:()=>{H(!0)}},"Add Class to Schedule"),g&&e.createElement(Y,{size:"compact",shape:"pill",onClick:()=>{t==="teacher"?Q(!0):M(!0)}},"Add Makup Class")),maxLines:1}),!B&&!E&&!P&&e.createElement(ba,null,e.createElement(Ca,{data:L},e.createElement(Sa,null),e.createElement(xa,{excludedDays:[0],startDayHour:7,endDayHour:19}),e.createElement(It,{appointmentComponent:Rn}),e.createElement(Ct,{contentComponent:k,showCloseButton:!0}))))))};function Gn(t){const[a,r]=Ie(),[s,l]=d.exports.useState(1),[n,c]=d.exports.useState(12),i=o=>{o<1||o>Math.ceil(t.data.length/n)||l(o)},p=o=>{const h=Math.ceil(t.data.length/o);h<s?(c(o),l(h)):c(o)},f=()=>{const o=(s-1)*n;return t.data.slice(o,o+n)},g={Body:{style:{width:"auto",margin:"1rem .5rem"}}};return d.exports.createElement(d.exports.Fragment,null,d.exports.createElement("div",{className:a({height:t.height||"600px",marginBottom:"10px",marginTop:"10px"})},d.exports.createElement($a,null,d.exports.createElement(zt,{title:t.title,actions:t.actions,sub:t.sub}),t.isLoading&&d.exports.createElement(qa,{infinite:!0}),d.exports.createElement(va,null,t.columns.map(o=>d.exports.createElement(wa,{className:a({backgroundColor:"#F9F9FA"}),key:o},o))),d.exports.createElement(ka,null,t.error&&d.exports.createElement(Ne,{kind:"negative",overrides:g},"Something went wrong: ",t.error),t.data&&t.data.length<1&&!t.error&&d.exports.createElement(Ne,{overrides:g},"No ",t.title," avaliable"),f().map((o,h)=>d.exports.createElement(Ba,{key:h},o.map(b=>typeof b=="object"&&b instanceof Array?d.exports.createElement(St,null,b.map(({action:q,handler:L})=>{switch(q){case"view":return d.exports.createElement(at,{key:q},d.exports.createElement(Fa,{size:24,onClick:L}));case"delete":return d.exports.createElement(at,{key:q},d.exports.createElement(Aa,{size:24,onClick:L}));case"add":return d.exports.createElement(at,{key:q},d.exports.createElement(Da,{size:24,onClick:L}));default:return d.exports.createElement(at,{key:q},d.exports.createElement(La,{size:24,onClick:L}))}})):d.exports.createElement(St,{key:b},b))))))),d.exports.createElement("div",{className:a({paddingTop:r.sizing.scale600,paddingBottom:r.sizing.scale600,paddingRight:r.sizing.scale800,paddingLeft:r.sizing.scale800,display:t.hidePagination?"none":"flex",justifyContent:"space-between"})},d.exports.createElement(Dt,{content:({close:o})=>d.exports.createElement(Ia,{items:Array.from({length:100},(h,b)=>({label:b+1})),onItemSelect:({item:h})=>{p(h.label),o()},overrides:{List:{style:{height:"150px",width:"100px"}}}}),placement:At.bottom},d.exports.createElement(Y,{kind:Na.tertiary,endEnhancer:Ta},`${n} Rows`)),d.exports.createElement(Ma,{currentPage:s,numPages:Math.ceil(t.data.length/n),onPageChange:({nextPage:o})=>i(o)})))}function qe({title:t,columns:a,data:r,actions:s,isLoading:l,height:n,hidePagination:c,error:i,sub:p}){const f=p===void 0?!0:p;return d.exports.createElement(Gn,{height:n,columns:a,data:r,title:t,actions:s,isLoading:l,hidePagination:c,error:i,sub:f})}var Ut={all:()=>I.get("attendances"),allBySchedule:t=>I.get(`attendances/schedule/${t}`),allByStudentId:t=>I.get(`attendances/student/${t}`),create:t=>I.post("attendances",t)},xe={all:()=>I.get("students"),allBySection:t=>I.get(`students/section/${t}`),getById:t=>I.get(`students/${t}`),delete:t=>I.delete(`students/${t}`),create:t=>I.post("students",t),createBulk:t=>I.post("students/bulk",t),import:t=>I.post("students/import",t),update:(t,a)=>I.put(`students/${t}`,a)};const wt={Body:{style:{width:"auto",margin:"1rem .5rem"}}},Vt=({id:t,actions:a})=>{U();const r=k=>{const B={};for(const H of k){const E=H.date;if(B[E]){const M=B[E];B[E]=[...M,H]}else B[E]=[H]}q(B)},{loading:s,request:l,error:n,data:c}=x(be.getById,{onComplete:k=>{o(k.section.id)}}),{loading:i,request:p,error:f}=x(Ut.allBySchedule,{onComplete:r}),{loading:g,request:o,data:h}=x(xe.allBySection,{errorMessage:"Could not fetch students!"});d.exports.useEffect(()=>{l(t),p(t)},[]);const[b,q]=d.exports.useState({}),[L,v]=d.exports.useState(""),u=s||i||g,$=n||f,D=k=>{const B=[];return k&&k.length&&k.forEach(({attendance:H,studentId:E,fullname:M})=>{const P=H.filter(({absent:S,schedule:J})=>S&&J.id===t).length,Q=H.filter(({absent:S,schedule:J})=>!S&&J.id===t).length,N=Math.round(Q/(P+Q)*100);B.push([E,M,P,Q,e.createElement(lt,{closeable:!1,kind:N>=75?"positive":"negative"},isNaN(N)?"0 %":`${N} %`)])}),B},A=k=>{const B=[];return k&&k.forEach(({absent:H,student:{studentId:E,fullname:M}})=>{B.push([E,M,e.createElement(lt,{closeable:!1,kind:H?"negative":"positive"},H?"ABSENT":"PRESENT")])}),B};return e.createElement(Z,{error:$,isLoading:u,title:c&&`Attendance Details : ${c.name}`||"Attendance Details",actions:a},c&&e.createElement(e.Fragment,null,Object.keys(b).length>0?e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"1px",flexGridRowGap:"1px"},e.createElement(T,null,e.createElement(Pa,{includeDates:Object.keys(b).length>0?Object.keys(b).map(k=>new Date(k)):void 0,onChange:({date:k})=>v(k.toISOString())})),e.createElement(T,null,L?e.createElement(qe,{error:$,isLoading:u,title:`Attendance Sheet for ${new Date(L).toDateString()}`,columns:["Student ID","Full name","Status"],data:A(b[L])}):e.createElement(Ne,{overrides:wt},"Please select a date from the calendar to view attendance sheet"))):e.createElement(Ne,{overrides:wt},"No attendance currently avaliable"),e.createElement(qe,{error:$,isLoading:u,title:"Students",columns:["Student ID","Full name","Days Absent","Days Present","Overall Attendance"],data:D(h)})))},zn=["Monday","Tuesday","Wednsday","Thursday","Friday","Saturday"],Ht=({id:t,removable:a,actions:r})=>{const s=U(),{loading:l,request:n,error:c,data:i}=x(be.getById),{loading:p,request:f}=x(be.delete,{onComplete:()=>{s(-1)},errorMessage:"Could not delete!",successMessage:"deleted!"});d.exports.useEffect(()=>{n(t)},[]);const g=o=>{if(o){const h=o.split(",").map(L=>parseInt(L));console.log(h);const b=new Date(`2018-11-01T${ct[h[0]]}`),q=new Date(`2018-11-01T${ct[h[h.length-1]+1]}`);return`${b.toLocaleTimeString()} - ${q.toLocaleTimeString()}`}return""};return e.createElement(Z,{error:c,isLoading:l||p,title:"Schedule Details"},i&&e.createElement(e.Fragment,null,e.createElement(De,null,e.createElement(Ae,null,e.createElement(ve,{heading:i.name,endEnhancer:()=>e.createElement(e.Fragment,null,a&&e.createElement(Y,{size:"compact",shape:"pill",colors:{backgroundColor:"indianred",color:"white"},onClick:()=>{confirm("Are you sure, this action is permanent!")&&f(i.id)}},"Delete")),maxLines:1}),e.createElement(te,null,e.createElement(ae,{description:"Class"},i.name)),e.createElement(te,null,e.createElement(ae,{description:"Schedule"},`${zn[i.weekday]} ${g(i.slots)}`)),e.createElement(te,null,e.createElement(ae,{description:"Classroom"},i.classroom.name)),e.createElement(te,null,e.createElement(ae,{description:"Teacher"},i.teacher.user.fullname)),e.createElement(te,null,e.createElement(ae,{description:"Section"},`${i.section.department.id} ${i.section.name} [${i.section.year} batch]`))),e.createElement(Me,null)),e.createElement(Vt,{id:t,actions:r})))},On=()=>{const{id:t}=ge();return U(),e.createElement(e.Fragment,null,e.createElement(Ht,{id:t,removable:!0,actions:[{name:"Take Attendance",link:`/app/admin/create-attendance/${t}`}]}))},jn=()=>{const{request:t,loading:a,data:r,error:s}=x(pe.all),l=U(),n=c=>{const i=[];return c&&c.length&&c.forEach(({id:p,name:f})=>{i.push([p,f,[{action:"view",handler:()=>{l(`/app/admin/department/${p}`)}}]])}),i};return d.exports.useEffect(()=>{t()},[]),e.createElement(e.Fragment,null,e.createElement(qe,{error:s,isLoading:a,title:"Departments",columns:["ID","Name","Actions"],data:n(r),actions:[{name:"Create Department",link:"/app/admin/create-department"}]}))},Un=({id:t})=>{const{request:a,loading:r,data:s,error:l}=x(ke.allByDepartment),n=U(),c=i=>{const p=[];return i&&i.length&&i.forEach(({id:f,user:{fullname:g,email:o},departments:h})=>{p.push([g,o,h.reduce((b,q)=>b+" "+q.id,""),[{action:"view",handler:()=>{n(`/app/admin/teacher/${f}`)}}]])}),p};return d.exports.useEffect(()=>{a(t)},[]),e.createElement(e.Fragment,null,e.createElement(qe,{height:"300px",error:l,isLoading:r,title:"Teachers",columns:["Full Name","Email","Department","Actions"],data:c(s),actions:[{name:"Create Teacher",link:"/app/admin/create-teacher"}]}))},Vn=({id:t})=>{const{request:a,loading:r,data:s,error:l}=x($e.allByDepartmentSlot),n=U(),c=i=>{const p=[];return i&&i.length&&i.forEach(({id:f,name:g,year:o,department:{name:h}})=>{p.push([g,o,h,[{action:"view",handler:()=>{n(`/app/admin/section/${f}`)}}]])}),p};return d.exports.useEffect(()=>{a(t)},[]),e.createElement(e.Fragment,null,e.createElement(qe,{height:"300px",error:l,isLoading:r,title:"Sections",columns:["Name","Year","Department","Actions"],data:c(s),actions:[{name:"Create Section",link:"/app/admin/create-section"}]}))},Hn=({id:t})=>{const{request:a,loading:r,data:s,error:l}=x(Be.allByDepartmentSlot),n=U(),c=i=>{const p=[];return i&&i.length&&i.forEach(({id:f,name:g,capacity:o,type:h,department:{name:b}})=>{p.push([g,o,h,b,[{action:"view",handler:()=>{n(`/app/admin/classroom/${f}`)}}]])}),p};return d.exports.useEffect(()=>{a(t)},[]),e.createElement(e.Fragment,null,e.createElement(qe,{height:"300px",error:l,isLoading:r,title:"Classrooms",columns:["Name","Capacity","Type","Department","Actions"],data:c(s),actions:[{name:"Create Classroom",link:"/app/admin/create-classroom"}]}))},Yn=()=>{const{id:t}=ge(),a=U(),{loading:r,request:s,error:l,data:n}=x(pe.getById),{loading:c,request:i}=x(pe.delete,{onComplete:()=>{a(-1)},errorMessage:"Could not delete department!",successMessage:"deleted!"});return d.exports.useEffect(()=>{s(t)},[]),e.createElement(Z,{error:l,isLoading:r||c,title:"Department Details"},n&&e.createElement(e.Fragment,null,e.createElement(De,null,e.createElement(Ae,null,e.createElement(ve,{heading:n.name,endEnhancer:()=>e.createElement(Ge,null,e.createElement(Y,{size:"compact",shape:"pill",onClick:()=>{a(`/app/admin/update-department/${n.id}`)}},"Update"),e.createElement(Y,{size:"compact",shape:"pill",colors:{backgroundColor:"indianred",color:"white"},onClick:()=>{confirm("Are you sure, this action is permanent!")&&i(n.id)}},"Delete")),maxLines:1}),e.createElement(te,null,e.createElement(ae,{description:"Department ID"},n.id)),e.createElement(te,null,e.createElement(ae,{description:"Name"},n.name))),e.createElement(Me,null)),e.createElement(Un,{id:t}),e.createElement(Vn,{id:t}),e.createElement(Hn,{id:t})))},Wn={id:ne().required("Department ID is required"),name:ne().required("Name is required")},Yt=({name:t,id:a,disableId:r,onSubmit:s,isLoading:l})=>{const{values:n,errors:c,touched:i,handleChange:p,handleBlur:f,handleSubmit:g}=fe({validationSchema:ye().shape(F({},Wn)),initialValues:{name:t||"",id:a||""},onSubmit:o=>{o.name&&o.id&&s&&s(o)}});return e.createElement(e.Fragment,null,e.createElement(w,{label:"Department ID",error:c.id},e.createElement(K,{disabled:l||r,id:"id",type:"id",onChange:p,onBlur:f,value:n.id})),e.createElement(w,{label:"Name",error:c.name},e.createElement(K,{disabled:l,id:"name",type:"name",onChange:p,onBlur:f,value:n.name})),e.createElement(Y,{type:"button",id:"save",onClick:()=>{g()},isLoading:l},"Save"))},_n=()=>{const t=U(),{id:a}=ge();d.exports.useEffect(()=>{s(a)},[]);const{loading:r,request:s,error:l,data:n}=x(pe.getById),{request:c,loading:i}=x(pe.update,{errorMessage:"Could not update department",successMessage:"Department Updated",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Update Department",error:l,isLoading:r},n&&e.createElement(Yt,{disableId:!0,id:n.id,name:n.name,isLoading:r||i,onSubmit:p=>{c(a,F({},p))}}))},Kn=()=>{const t=U(),{request:a,loading:r}=x(pe.create,{errorMessage:"Could create department",successMessage:"Department Created",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Create Department"},e.createElement(Yt,{isLoading:r,onSubmit:s=>{a(F({},s))}}))},Jn={course:V().required("Course is required"),type:V().required("Course type is required"),teachers:V().required("Teachers are required"),duration:Se().required("Duration is required").min(1).max(4).integer()},Qn=({department:t,year:a,semester:r,isOpen:s,setIsOpen:l,isLoading:n,onSubmit:c})=>{const{loading:i,request:p}=x(Le.allByDepartment,{errorMessage:"could not load data",onComplete:E=>{b(E.map(({id:M,name:P})=>({id:M,label:P})))}}),{loading:f,request:g}=x(ke.allByDepartmentSlot,{errorMessage:"could not load data",onComplete:E=>{L(E.map(({id:M,user:{fullname:P},slot:Q})=>({id:M,label:P,slot:Q})))}}),o=n||i||f,[h,b]=d.exports.useState([]),[q,L]=d.exports.useState([]);d.exports.useEffect(()=>{t&&s&&a&&r&&(p(t),g(t,a,r))},[t,s,a,r]);const{values:v,errors:u,touched:$,handleChange:D,handleBlur:A,handleSubmit:k,setFieldValue:B,resetForm:H}=fe({validationSchema:ye().shape(F({},Jn)),initialValues:{duration:"",teachers:[]},onSubmit:E=>{c&&(c(F({},E)),l(!1),H())}});return e.createElement(e.Fragment,null,e.createElement(Ye,{onClose:()=>{l(!1)},isOpen:s},e.createElement(We,null,"Add Class"),e.createElement(_e,null,e.createElement(w,{label:"Course",error:h&&h.length?u.course:"No Courses found"},e.createElement(j,{disabled:o,id:"course",options:h,onChange:({value:E})=>{E&&E.length&&B("course",E)},value:v.course})),e.createElement(w,{label:"Type",error:u.type},e.createElement(j,{disabled:o,id:"type",options:[{id:"LECTURE",label:"Lecture"},{id:"LAB",label:"Lab"}],onChange:({value:E})=>{E&&E.length&&B("type",E)},value:v.type})),e.createElement(w,{label:"Duration in hours",error:u.duration},e.createElement(K,{disabled:o,id:"duration",type:"number",onChange:D,onBlur:A,value:v.duration})),e.createElement(w,{label:"Allowed Teachers",error:q&&q.length?u.teachers:"No Teachers found"},e.createElement(j,{disabled:o,id:"teachers",multi:!0,options:q,onChange:({value:E})=>{E&&E.length&&B("teachers",E)},value:v.teachers}))),e.createElement(Ke,null,e.createElement(Je,{onClick:()=>{k()}},"Add"))))},Xn=({course:t,type:a,duration:r,teachers:s})=>e.createElement(e.Fragment,null,e.createElement(ve,{heading:`${t} [${a}]`,subHeading:`${r} hours`,maxLines:1}),e.createElement(te,null,e.createElement(ae,{description:"Allowed Teachers"},s.map(({id:l,label:n})=>e.createElement(lt,{kind:"primary",key:l,closeable:!1},n))))),Zn={department:V().required("Department is required"),sections:V().required("Sections are required"),classrooms:V().required("Classrooms are required"),classes:V().required("Classes are required"),year:ne().required("Year is required"),semester:ne().required("Semester is required")},er=t=>{const a=t%10,r=t%100;return a==1&&r!==11?t+"st":a==2&&r!=12?t+"nd":a==3&&r!=13?t+"rd":t+"th"},tr=({isLoading:t,onSubmit:a})=>{var N;const{loading:r,request:s}=x(pe.all,{onComplete:S=>{q(S.map(({id:J,name:se})=>({id:J,label:se})))}}),{loading:l,request:n}=x($e.allByDepartmentSlot,{onComplete:S=>{f(S)}}),{loading:c,request:i}=x(Be.allByDepartmentSlot,{onComplete:S=>{g(S)}}),p=t||r||l||c,f=S=>{const J=S.map(({id:se,name:y,year:G,slot:ue})=>({id:se,label:`${y} [${er(G)} year]`,slot:ue}));v(J)},g=S=>{const J=S.map(({id:se,name:y,type:G,slot:ue})=>({id:se,label:`${y} [${G}]`,type:G,slot:ue}));$(J),Q("classrooms",J)},[o,h]=d.exports.useState(!1),[b,q]=d.exports.useState([]),[L,v]=d.exports.useState([]),[u,$]=d.exports.useState([]),D=({teachers:S,course:J,type:se,duration:y})=>({course:J[0].label,teachers:S,type:se[0].label,duration:y}),A=S=>{const J=D(S);return e.createElement(Xn,F({},J))};d.exports.useEffect(()=>{s()},[]);const{values:k,errors:B,touched:H,handleChange:E,handleBlur:M,handleSubmit:P,setFieldValue:Q}=fe({validationSchema:ye().shape(F({},Zn)),initialValues:{department:[],classes:[],sections:[],classrooms:[],year:"",semester:""},onSubmit:S=>{if(a){const{department:J,classes:se,classrooms:y,year:G,semester:ue}=S,z=se.map(D),re={};z.forEach(({teachers:de})=>{for(const m of de)re[m.id]=m});const Fe={};y.forEach(de=>{Fe[de.id]=de});const ee=z.map(de=>{const m=y.filter(({type:C})=>C.toLowerCase()===de.type.toLowerCase()),O=de.teachers.map(({id:C})=>C),_=m.map(({id:C})=>C);return ce(F({},de),{classrooms:_,teachers:O,year:G,semester:ue})});a(ce(F({},S),{department:J[0].id,classes:ee,teacherLookup:re,classroomLookup:Fe}))}}});return e.createElement(e.Fragment,null,e.createElement(Qn,{department:(N=k==null?void 0:k.department[0])==null?void 0:N.id,year:k==null?void 0:k.year,semester:k==null?void 0:k.semester,isOpen:o,setIsOpen:h,isLoading:p,onSubmit:S=>{Q("classes",[...k.classes,S])}}),e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Academic Year",error:B.year},e.createElement(K,{disabled:p,id:"year",type:"number",onChange:E,onBlur:M,value:k.year}))),e.createElement(T,null,e.createElement(w,{label:"Academic Semester",error:B.semester},e.createElement(K,{disabled:p,id:"semester",type:"number",onChange:E,onBlur:M,value:k.semester})))),e.createElement(w,{label:"Department",error:b&&b.length?B.department:"No Departments found"},e.createElement(j,{disabled:p||!k.year||!k.semester,id:"department",options:b,onChange:({value:S})=>{S&&S.length&&(Q("department",S),Q("sections",[]),Q("classrooms",[]),n(S[0].id,k.year,k.semester),i(S[0].id,k.year,k.semester))},value:k.department})),e.createElement(w,{label:"Sections",error:L&&L.length?B.sections:"No Sections found"},e.createElement(j,{disabled:p,id:"sections",multi:!0,options:L,onChange:({value:S})=>{S&&S.length&&Q("sections",S)},value:k.sections})),e.createElement(w,{label:"Classrooms",error:u&&u.length?B.classrooms:"No Classrooms found"},e.createElement(j,{disabled:p,id:"classrooms",multi:!0,options:u,onChange:({value:S})=>{S&&S.length&&Q("classrooms",S)},value:k.classrooms})),e.createElement(ve,{heading:"Classes",endEnhancer:()=>e.createElement(Y,{disabled:!k.department||!k.department.length||!k.year||!k.semester,onClick:()=>{h(!0)}},"Add Class"),maxLines:1}),e.createElement(Nt,{items:k.classes.map(A),removable:!0,onChange:({oldIndex:S,newIndex:J})=>Q("classes",J===-1?ot.arrayRemove(k.classes,S):ot.arrayMove(k.classes,S,J))}),e.createElement(Y,{type:"button",id:"generate",disabled:k.classes.length<1,onClick:()=>{P()},isLoading:p},"Generate Schedule"))},ar=()=>{const t=U(),{request:a,loading:r}=x(be.bulk,{errorMessage:"Could not save!",successMessage:"Saved!",onComplete:()=>{t(-1)}}),{request:s,loading:l}=x(be.generate,{errorMessage:"Could not generate schedule!",successMessage:"Schedule generated!",onComplete:h=>{c(h)}}),[n,c]=d.exports.useState([]),i=[{key:"sectionLabel",label:"Group by Section"},{key:"classroomLabel",label:"Group by Classroom"},{key:"teacherLabel",label:"Group By Teacher"}],[p,f]=e.useState(i[0].key),g=l||r,o=h=>{const b={};return n.forEach(q=>{const L=b[q[h]];L?b[q[h]]=[...L,q]:b[q[h]]=[q]}),b};return e.createElement(Z,{isLoading:g,title:`${n.length?"Schedule Generated!":"Generate Schedule"}`,actions:n.length?[{name:"Save Schedules",handler:()=>{a({schedules:n})}},{name:"Generate New",handler:()=>{c([])}}]:void 0},!n.length&&e.createElement(tr,{onSubmit:s,isLoading:g}),n.length>0&&e.createElement(Ra,{activeKey:p,onChange:({activeKey:h})=>{f(h)},activateOnFocus:!0},i.map(({key:h,label:b})=>e.createElement(Ga,{key:h,title:b},Object.keys(o(h)).map(q=>e.createElement(jt,{title:q,schedules:o(h)[q]}))))))},nr=()=>{const{request:t,loading:a,data:r,error:s}=x($e.all),l=U(),n=c=>{const i=[];return c&&c.length&&c.forEach(({id:p,name:f,year:g,department:{name:o}})=>{i.push([f,g,o,[{action:"view",handler:()=>{l(`/app/admin/section/${p}`)}}]])}),i};return d.exports.useEffect(()=>{t()},[]),e.createElement(e.Fragment,null,e.createElement(qe,{error:s,isLoading:a,title:"Sections",columns:["Name","Year","Department","Actions"],data:n(r),actions:[{name:"Create Section",link:"/app/admin/create-section"}]}))},rr={teachers:V().required("Teachers are required"),year:Se().required("Year is required"),semester:Se().required("Semester is required"),weekday:V().required("Weekday is required"),startSlot:V().required("Start time is required"),endSlot:V().required("End time is required")},sr=({teacher:t,year:a,semester:r,isOpen:s,setIsOpen:l,isLoading:n,onSubmit:c})=>{const{loading:i,request:p}=x(ke.all,{errorMessage:"could not load data",onComplete:E=>{o(E.map(({id:M,user:{fullname:P},slot:Q})=>({id:M,label:P,slot:Q})))}}),f=n||i,[g,o]=d.exports.useState([]),[h,b]=d.exports.useState([]),[q,L]=d.exports.useState([]);d.exports.useEffect(()=>{if(s){const E=[];for(const M in Te){const P=new Date(`2018-11-01T${Te[M]}`);E.push({id:parseInt(M),label:`${P.toLocaleTimeString()}`})}b(E),p()}else H()},[s]);const{values:v,errors:u,touched:$,handleChange:D,handleBlur:A,handleSubmit:k,setFieldValue:B,resetForm:H}=fe({validationSchema:ye().shape(F({},rr)),initialValues:{year:a||"",semester:r||"",teachers:t||[],startSlot:[],endSlot:[],weekday:[]},onSubmit:E=>{if(c){const M=E.year,P=E.semester,Q=E.teachers[0].id,N=E.weekday[0].id,S=E.startSlot[0].id,J=E.endSlot[0].id;c({name:"Reserved Slot",year:M,semester:P,teacher:Q,slots:((y,G)=>[...Array(G-y+1).keys()].map(ue=>ue+y))(S,J).join(","),weekday:N,reserved:!0})}}});return e.createElement(e.Fragment,null,e.createElement(Ye,{onClose:()=>{l(!1)},isOpen:s,size:"auto"},e.createElement(We,null,"Add Reserved Time"),e.createElement(_e,null,e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Year",error:u.year},e.createElement(K,{disabled:f,id:"year",type:"number",onChange:D,onBlur:A,value:v.year}))),e.createElement(T,null,e.createElement(w,{label:"Semester",error:u.semester},e.createElement(K,{disabled:f,id:"semester",type:"number",onChange:D,onBlur:A,value:v.semester})))),e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Teacher",error:g&&g.length?u.teachers:"No Teachers found"},e.createElement(j,{disabled:f||!0,id:"teachers",options:g,onChange:({value:E})=>{E&&E.length&&B("teachers",E)},value:v.teachers}))),e.createElement(T,null,e.createElement(T,null,e.createElement(w,{label:"Week Day",error:u.weekday},e.createElement(j,{disabled:f,id:"weekday",options:[{id:0,label:"Monday"},{id:1,label:"Tuesday"},{id:2,label:"Wednsday"},{id:3,label:"Thursday"},{id:4,label:"Friday"},{id:5,label:"Saturday"}],onChange:({value:E})=>{E&&E.length&&B("weekday",E)},value:v.weekday})))),e.createElement(T,null,e.createElement(w,{label:"Start time",error:u.startSlot},e.createElement(j,{disabled:f,id:"startSlot",options:h,onChange:({value:E})=>{E&&E.length&&(B("startSlot",E),console.log({startSlots:h,value:E}),L(h.filter(({id:M})=>M>E[0].id)))},value:v.startSlot}))),e.createElement(T,null,e.createElement(w,{label:"End time",error:u.endSlot},e.createElement(j,{disabled:f||v.startSlot.length<1,id:"endSlot",options:q,onChange:({value:E})=>{E&&E.length&&B("endSlot",E)},value:v.endSlot}))))),e.createElement(Ke,null,e.createElement(Je,{overrides:{BaseButton:{style:{width:"100%"}}},isLoading:f,onClick:()=>{k()}},"Add"))))},kt={Body:{style:{width:"auto",margin:"1rem .5rem"}}},lr=t=>{const a=t%10,r=t%100;return a==1&&r!==11?t+"st":a==2&&r!=12?t+"nd":a==3&&r!=13?t+"rd":t+"th"},Qe=({by:t,id:a,removable:r,addable:s,makeup:l,reserved:n,actions:c,info:i,title:p,teacher:f})=>{U();const[g,o]=d.exports.useState(!1),h=t.toLowerCase();let b=be.allBySection;switch(h){case"teacher":b=be.allByTeacher;break;case"section":b=be.allBySection;break;case"classroom":b=be.allByClassroom;break}const q=y=>{switch(h){case"teacher":return`${y.teacher.user.fullname}`;case"section":return`${lr(y.section.year)} year ${y.section.department.id} ${y.section.name} Students`;case"classroom":return`${y.classroom.name} [${y.classroom.type}]`}return"-"},{request:L,loading:v,error:u}=x(b,{onComplete:y=>{M(y.map(G=>ce(F({},G),{slots:G.slots.split(",").map(ue=>parseInt(ue))})))}}),{loading:$,request:D}=x(be.delete,{onComplete:()=>{Q([]),M([]),S({}),L(a)},errorMessage:"Could not delete!",successMessage:"deleted!"}),{loading:A,request:k}=x(be.create,{onComplete:()=>{Q([]),M([]),S({}),L(a)},errorMessage:"Could not add!",successMessage:"added!"}),{loading:B,request:H}=x(be.createReserved,{onComplete:()=>{o(!1),Q([]),M([]),S({}),L(a)},errorMessage:"Could not add!",successMessage:"added!"});d.exports.useEffect(()=>{L(a)},[]);const[E,M]=d.exports.useState([]),[P,Q]=d.exports.useState([]),[N,S]=d.exports.useState({}),J=(y,G)=>E.filter(({year:ue,semester:z})=>ue===y&&G===z),se=()=>{N.year&&N.year.length>0&&N.semester&&N.semester.length>0&&Q(J(N.year[0].id,N.semester[0].id))};return d.exports.useEffect(()=>{se()},[N]),e.createElement(Z,{title:p||"Schedule",isLoading:v||$,error:u,actions:n?[{name:"Add Reserved Time",handler:()=>{o(!0)}}]:void 0},e.createElement(sr,{year:N.year,semester:N.semester,teacher:f,isOpen:g,setIsOpen:o,isLoading:B,onSubmit:y=>{H&&H(y)}}),e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Academic Year"},e.createElement(j,{options:Object.entries(Object.fromEntries(E.map(y=>[y.year,!0]))).map(([y])=>({id:y,label:y})),onChange:({value:y})=>{S(ce(F({},N),{year:y}))},value:N.year}))),e.createElement(T,null,e.createElement(w,{label:"Academic Semester"},e.createElement(j,{options:Object.entries(Object.fromEntries(E.map(y=>[y.semester,!0]))).map(([y])=>({id:y,label:y})),onChange:({value:y})=>{S(ce(F({},N),{semester:y}))},value:N.semester})))),i&&P.length>0&&e.createElement(Ne,{overrides:kt},i),P.length>0?e.createElement(e.Fragment,null,e.createElement(jt,{by:t,department:[{id:P[0].section.department.id,label:P[0].section.department.name}],section:[{id:P[0].section.id,label:P[0].section.name}],teacher:[{id:P[0].teacher.id,label:P[0].teacher.user.fullname}],year:P[0].year,semester:P[0].semester,title:`${P[0].year} AY, Semester  ${P[0].semester} - Schedule for ${q(P[0])}`,schedules:P,deleteRequest:r&&D,addRequest:s&&k,makeupRequest:l&&k,actions:c,isLoading:A})):e.createElement(Ne,{overrides:kt},"No schedule avaliable for the selected time period (make sure to select a year and semester)"))},or=({id:t})=>{const{request:a,loading:r,data:s,error:l}=x(xe.allBySection),n=U(),c=i=>{const p=[];return i&&i.length&&i.forEach(({id:f,studentId:g,fullname:o,section:{name:h,department:{id:b}}})=>{p.push([g,o,b,h,[{action:"view",handler:()=>{n(`/app/admin/student/${f}`)}}]])}),p};return d.exports.useEffect(()=>{a(t)},[]),e.createElement(e.Fragment,null,e.createElement(qe,{error:l,isLoading:r,title:"Students",columns:["Student ID","Full name","Department","Section","Actions"],data:c(s),actions:[{name:"Create Student",link:"/app/admin/create-student"}]}))},cr=()=>{const{id:t}=ge(),a=U(),{loading:r,request:s,error:l,data:n}=x($e.getById),{loading:c,request:i}=x($e.delete,{onComplete:()=>{a(-1)},errorMessage:"Could not delete!",successMessage:"deleted!"});return d.exports.useEffect(()=>{s(t)},[]),e.createElement(Z,{error:l,isLoading:r||c,title:"Section Details"},n&&e.createElement(e.Fragment,null,e.createElement(De,null,e.createElement(Ae,null,e.createElement(ve,{heading:n.name,endEnhancer:()=>e.createElement(Ge,null,e.createElement(Y,{size:"compact",shape:"pill",onClick:()=>{a(`/app/admin/update-section/${n.id}`)}},"Update"),e.createElement(Y,{size:"compact",shape:"pill",colors:{backgroundColor:"indianred",color:"white"},onClick:()=>{confirm("Are you sure, this action is permanent!")&&i(n.id)}},"Delete")),maxLines:1}),e.createElement(te,null,e.createElement(ae,{description:"Department"},n.department.name)),e.createElement(te,null,e.createElement(ae,{description:"Section Name"},n.name)),e.createElement(te,null,e.createElement(ae,{description:"Batch Year"},n.year))),e.createElement(Me,null)),e.createElement(Qe,{by:"section",id:t,removable:!0,addable:!0}),e.createElement(or,{id:t})))},ir={year:ne().required("Year is required"),name:ne().required("Name is required"),department:V().required("Department is required")},Wt=({name:t,year:a,department:r,onSubmit:s,isLoading:l})=>{const[n,c]=d.exports.useState([]),{loading:i,request:p}=x(pe.all,{onComplete:u=>{c(u.map(({id:$,name:D})=>({id:$,label:D})))}}),f=l||i;d.exports.useEffect(()=>{p()},[]);const{values:g,errors:o,touched:h,handleChange:b,handleBlur:q,handleSubmit:L,setFieldValue:v}=fe({validationSchema:ye().shape(F({},ir)),initialValues:{name:t||"",year:a||"",department:r||[]},onSubmit:u=>{u.name&&u.year&&u.department&&s&&s(ce(F({},u),{department:u.department[0].id}))}});return e.createElement(e.Fragment,null,e.createElement(w,{label:"Department",error:n.length?o.department:"No Departments are currently avaliable"},e.createElement(j,{disabled:f,id:"department",options:n,onChange:({value:u})=>{u&&u.length&&v("department",u)},value:g.department})),e.createElement(w,{label:"Section Name",error:o.name},e.createElement(K,{disabled:f,id:"name",type:"text",onChange:b,onBlur:q,value:g.name})),e.createElement(w,{label:"Batch Year",error:o.year},e.createElement(K,{disabled:f,id:"year",type:"number",onChange:b,onBlur:q,value:g.year})),e.createElement(Y,{type:"button",id:"save",onClick:()=>{L()},isLoading:f},"Save"))},mr=()=>{const t=U(),{id:a}=ge();d.exports.useEffect(()=>{s(a)},[]);const{loading:r,request:s,error:l,data:n}=x($e.getById),{request:c,loading:i}=x($e.update,{errorMessage:"Could not update!",successMessage:"Updated successfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Update Section",error:l,isLoading:r},n&&e.createElement(Wt,{name:n.name,department:[{label:n.department.name,id:n.department.id}],year:n.year,isLoading:r||i,onSubmit:p=>{c(a,F({},p))}}))},dr=()=>{const t=U(),{request:a,loading:r}=x($e.create,{errorMessage:"Create failed!",successMessage:"Created succesfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Create Section"},e.createElement(Wt,{isLoading:r,onSubmit:s=>{a(F({},s))}}))},ur=()=>{const{request:t,loading:a,data:r,error:s}=x(Le.all),l=U(),n=c=>{const i=[];return c&&c.length&&c.forEach(({id:p,name:f,year:g,department:{name:o}})=>{i.push([f,g,o,[{action:"view",handler:()=>{l(`/app/admin/course/${p}`)}}]])}),i};return d.exports.useEffect(()=>{t()},[]),e.createElement(e.Fragment,null,e.createElement(qe,{error:s,isLoading:a,title:"Courses",columns:["Name","Year","Department","Actions"],data:n(r),actions:[{name:"Create Course",link:"/app/admin/create-course"}]}))},pr=()=>{const{id:t}=ge(),a=U(),{loading:r,request:s,error:l,data:n}=x(Le.getById),{loading:c,request:i}=x(Le.delete,{onComplete:()=>{a(-1)},errorMessage:"Could not delete!",successMessage:"deleted!"});return d.exports.useEffect(()=>{s(t)},[]),e.createElement(Z,{error:l,isLoading:r||c,title:"Course Details"},n&&e.createElement(e.Fragment,null,e.createElement(De,null,e.createElement(Ae,null,e.createElement(ve,{heading:n.name,endEnhancer:()=>e.createElement(Ge,null,e.createElement(Y,{size:"compact",shape:"pill",onClick:()=>{a(`/app/admin/update-course/${n.id}`)}},"Update"),e.createElement(Y,{size:"compact",shape:"pill",colors:{backgroundColor:"indianred",color:"white"},onClick:()=>{confirm("Are you sure, this action is permanent!")&&i(n.id)}},"Delete")),maxLines:1}),e.createElement(te,null,e.createElement(ae,{description:"Department"},n.department.name)),e.createElement(te,null,e.createElement(ae,{description:"Course Name"},n.name))),e.createElement(Me,null))))},gr={name:ne().required("Name is required"),department:V().required("Department is required")},_t=({name:t,year:a,department:r,onSubmit:s,isLoading:l})=>{const[n,c]=d.exports.useState([]),{loading:i,request:p}=x(pe.all,{onComplete:u=>{c(u.map(({id:$,name:D})=>({id:$,label:D})))}}),f=l||i;d.exports.useEffect(()=>{p()},[]);const{values:g,errors:o,touched:h,handleChange:b,handleBlur:q,handleSubmit:L,setFieldValue:v}=fe({validationSchema:ye().shape(F({},gr)),initialValues:{name:t||"",year:a||"",department:r||[]},onSubmit:u=>{u.name&&u.department&&s&&s(ce(F({},u),{department:u.department[0].id}))}});return e.createElement(e.Fragment,null,e.createElement(w,{label:"Department",error:n.length?o.department:"No Departments are currently avaliable"},e.createElement(j,{disabled:f,id:"department",options:n,onChange:({value:u})=>{u&&u.length&&v("department",u)},value:g.department})),e.createElement(w,{label:"Course Name",error:o.name},e.createElement(K,{disabled:f,id:"name",type:"text",onChange:b,onBlur:q,value:g.name})),e.createElement(Y,{type:"button",id:"save",onClick:()=>{L()},isLoading:f},"Save"))},hr=()=>{const t=U(),{id:a}=ge();d.exports.useEffect(()=>{s(a)},[]);const{loading:r,request:s,error:l,data:n}=x(Le.getById),{request:c,loading:i}=x(Le.update,{errorMessage:"Could not update!",successMessage:"Updated successfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Update Course",error:l,isLoading:r},n&&e.createElement(_t,{name:n.name,department:[{label:n.department.name,id:n.department.id}],year:n.year,isLoading:r||i,onSubmit:p=>{c(a,F({},p))}}))},Er=()=>{const t=U(),{request:a,loading:r}=x(Le.create,{errorMessage:"Create failed!",successMessage:"Created succesfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Create Course"},e.createElement(_t,{isLoading:r,onSubmit:s=>{a(F({},s))}}))},fr=()=>{const{request:t,loading:a,data:r,error:s}=x(Be.all),l=U(),n=c=>{const i=[];return c&&c.length&&c.forEach(({id:p,name:f,capacity:g,type:o,department:{name:h}})=>{i.push([f,g,o,h,[{action:"view",handler:()=>{l(`/app/admin/classroom/${p}`)}}]])}),i};return d.exports.useEffect(()=>{t()},[]),e.createElement(e.Fragment,null,e.createElement(qe,{error:s,isLoading:a,title:"Classrooms",columns:["Name","Capacity","Type","Department","Actions"],data:n(r),actions:[{name:"Create Classroom",link:"/app/admin/create-classroom"}]}))},yr=()=>{const{id:t}=ge(),a=U(),{loading:r,request:s,error:l,data:n}=x(Be.getById),{loading:c,request:i}=x(Be.delete,{onComplete:()=>{a(-1)},errorMessage:"Could not delete!",successMessage:"deleted!"});return d.exports.useEffect(()=>{s(t)},[]),e.createElement(Z,{error:l,isLoading:r||c,title:"Classroom Details"},n&&e.createElement(e.Fragment,null,e.createElement(De,null,e.createElement(Ae,null,e.createElement(ve,{heading:n.name,endEnhancer:()=>e.createElement(Ge,null,e.createElement(Y,{size:"compact",shape:"pill",onClick:()=>{a(`/app/admin/update-classroom/${n.id}`)}},"Update"),e.createElement(Y,{size:"compact",shape:"pill",colors:{backgroundColor:"indianred",color:"white"},onClick:()=>{confirm("Are you sure, this action is permanent!")&&i(n.id)}},"Delete")),maxLines:1}),e.createElement(te,null,e.createElement(ae,{description:"Department"},n.department.name)),e.createElement(te,null,e.createElement(ae,{description:"Classroom Name"},n.name)),e.createElement(te,null,e.createElement(ae,{description:"Capacity"},n.capacity)),e.createElement(te,null,e.createElement(ae,{description:"Classroom Type"},n.type))),e.createElement(Me,null)),e.createElement(Qe,{by:"classroom",id:t,removable:!0,addable:!0})))},br={capacity:ne().required("Capacity is required"),name:ne().required("Name is required"),department:V().required("Department is required"),type:V().required("Classroom type is required")},Kt=({name:t,capacity:a,department:r,type:s,onSubmit:l,isLoading:n})=>{const[c,i]=d.exports.useState([]),{loading:p,request:f}=x(pe.all,{onComplete:$=>{i($.map(({id:D,name:A})=>({id:D,label:A})))}}),g=n||p;d.exports.useEffect(()=>{f()},[]);const{values:o,errors:h,touched:b,handleChange:q,handleBlur:L,handleSubmit:v,setFieldValue:u}=fe({validationSchema:ye().shape(F({},br)),initialValues:{name:t||"",capacity:a||"",department:r||[],type:s||[]},onSubmit:$=>{$.name&&$.capacity&&$.department&&$.type&&l&&l(ce(F({},$),{department:$.department[0].id,type:$.type[0].id}))}});return e.createElement(e.Fragment,null,e.createElement(w,{label:"Department",error:c.length?h.department:"No Departments are currently avaliable"},e.createElement(j,{disabled:g,id:"department",options:c,onChange:({value:$})=>{$&&$.length&&u("department",$)},value:o.department})),e.createElement(w,{label:"Classroom Name",error:h.name},e.createElement(K,{disabled:g,id:"name",type:"text",onChange:q,onBlur:L,value:o.name})),e.createElement(w,{label:"Classroom Type",error:h.type},e.createElement(j,{disabled:g,id:"type",options:[{id:"LECTURE",label:"Lecture"},{id:"LAB",label:"Lab"}],onChange:({value:$})=>{$&&$.length&&u("type",$)},value:o.type})),e.createElement(w,{label:"Capacity",error:h.capacity},e.createElement(K,{disabled:g,id:"capacity",type:"number",onChange:q,onBlur:L,value:o.capacity})),e.createElement(Y,{type:"button",id:"save",onClick:()=>{v()},isLoading:g},"Save"))},Cr=()=>{const t=U(),{id:a}=ge();d.exports.useEffect(()=>{s(a)},[]);const{loading:r,request:s,error:l,data:n}=x(Be.getById),{request:c,loading:i}=x(Be.update,{errorMessage:"Could not update!",successMessage:"Updated successfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Update Classroom",error:l,isLoading:r},n&&e.createElement(Kt,{name:n.name,department:[{label:n.department.name,id:n.department.id}],type:[{label:n.type,id:n.type.toUpperCase()}],capacity:n.capacity,isLoading:r||i,onSubmit:p=>{c(a,F({},p))}}))},Sr=()=>{const t=U(),{request:a,loading:r}=x(Be.create,{errorMessage:"Create failed!",successMessage:"Created succesfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Create Classroom"},e.createElement(Kt,{isLoading:r,onSubmit:s=>{a(F({},s))}}))},xr=()=>{const{request:t,loading:a,data:r,error:s}=x(ke.all),l=U(),n=c=>{const i=[];return c&&c.length&&c.forEach(({id:p,user:{fullname:f,email:g},departments:o})=>{i.push([f,g,o.reduce((h,b)=>h+" "+b.id,""),[{action:"view",handler:()=>{l(`/app/admin/teacher/${p}`)}}]])}),i};return d.exports.useEffect(()=>{t()},[]),e.createElement(e.Fragment,null,e.createElement(qe,{error:s,isLoading:a,title:"Teachers",columns:["Full Name","Email","Departments","Actions"],data:n(r),actions:[{name:"Create Teacher",link:"/app/admin/create-teacher"}]}))},$r=()=>{const{id:t}=ge(),a=U(),{loading:r,request:s,error:l,data:n}=x(ke.getById),{loading:c,request:i}=x(ke.delete,{onComplete:()=>{a(-1)},errorMessage:"Could not delete!",successMessage:"deleted!"});return d.exports.useEffect(()=>{s(t)},[]),e.createElement(Z,{error:l,isLoading:r||c,title:"Teacher Details"},n&&e.createElement(e.Fragment,null,e.createElement(De,null,e.createElement(Ae,null,e.createElement(ve,{heading:n.user.fullname,endEnhancer:()=>e.createElement(Ge,null,e.createElement(Y,{size:"compact",shape:"pill",onClick:()=>{a(`/app/admin/update-teacher/${n.id}`)}},"Update"),e.createElement(Y,{size:"compact",shape:"pill",colors:{backgroundColor:"indianred",color:"white"},onClick:()=>{confirm("Are you sure, this action is permanent!")&&i(n.id)}},"Delete")),maxLines:1}),e.createElement(te,null,e.createElement(ae,{description:"Full name"},n.user.fullname)),e.createElement(te,null,e.createElement(ae,{description:"Departments"},n.departments.reduce((p,f)=>p+" "+f.id,""))),e.createElement(te,null,e.createElement(ae,{description:"Email"},n.user.email))),e.createElement(Me,null)),e.createElement(Qe,{teacher:[{id:n.id,label:n.user.fullname}],by:"teacher",id:t,removable:!0,addable:!0,makeup:!0,reserved:!0,actions:[{name:"detail",handler:({id:p})=>{a(`/app/admin/schedule/${p}`)}}]})))},qr={fullname:ne().required("Fullname is required"),department:V().required("Department is required")},vr=({fullname:t,department:a,onSubmit:r,isLoading:s})=>{const[l,n]=d.exports.useState([]),{loading:c,request:i}=x(pe.all,{onComplete:u=>{n(u.map(({id:$,name:D})=>({id:$,label:D})))}}),p=s||c;d.exports.useEffect(()=>{i()},[]);const{values:f,errors:g,touched:o,handleChange:h,handleBlur:b,handleSubmit:q,setFieldValue:L,setFieldError:v}=fe({validationSchema:ye().shape(F({},qr)),initialValues:{fullname:t||"",department:a||[]},onSubmit:u=>{u.fullname&&r&&r(ce(F({},u),{departments:u.department.map(({id:$})=>$)}))}});return e.createElement(e.Fragment,null,e.createElement(w,{label:"Full Name",error:g.fullname},e.createElement(K,{disabled:p,id:"fullname",type:"text",onChange:h,onBlur:b,value:f.fullname})),e.createElement(w,{label:"Department",error:l.length?g.department:"No Departments are currently avaliable"},e.createElement(j,{disabled:p,id:"department",options:l,multi:!0,onChange:({value:u})=>{u&&u.length&&L("department",u)},value:f.department})),e.createElement(Y,{type:"button",id:"save",onClick:()=>{q()},isLoading:p},"Save"))},wr=()=>{const t=U(),{id:a}=ge();d.exports.useEffect(()=>{s(a)},[]);const{loading:r,request:s,error:l,data:n}=x(ke.getById),{request:c,loading:i}=x(ke.update,{errorMessage:"Could not update!",successMessage:"Updated successfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Update Teacher",error:l,isLoading:r},n&&e.createElement(vr,{fullname:n.user.fullname,department:n.departments.map(({id:p,name:f})=>({id:p,label:f})),isLoading:r||i,onSubmit:p=>{c(a,F({},p))}}))},kr={email:ne().email().required("Email is required"),password:ne().required("Password is required"),confirmPassword:ne().required("Confirm Password is required"),fullname:ne().required("Fullname is required"),department:V().required("Department is required")},Br=({email:t,password:a,fullname:r,department:s,onSubmit:l,isLoading:n})=>{const[c,i]=d.exports.useState([]),{loading:p,request:f}=x(pe.all,{onComplete:D=>{i(D.map(({id:A,name:k})=>({id:A,label:k})))}}),g=n||p;d.exports.useEffect(()=>{f()},[]);const{values:o,errors:h,touched:b,handleChange:q,handleBlur:L,handleSubmit:v,setFieldValue:u,setFieldError:$}=fe({validationSchema:ye().shape(F({},kr)),initialValues:{fullname:r||"",email:t||"",password:a||"",department:s||[]},onSubmit:D=>{D.email&&D.password&&D.fullname&&l&&l(ce(F({},D),{departments:D.department.map(({id:A})=>A)}))}});return e.createElement(e.Fragment,null,e.createElement(w,{label:"Full Name",error:h.fullname},e.createElement(K,{disabled:g,id:"fullname",type:"text",onChange:q,onBlur:L,value:o.fullname})),e.createElement(w,{label:"Email",error:h.email},e.createElement(K,{disabled:g,id:"email",type:"email",onChange:q,onBlur:L,value:o.email})),e.createElement(w,{label:"Department",error:c.length?h.department:"No Departments are currently avaliable"},e.createElement(j,{disabled:g,id:"department",multi:!0,options:c,onChange:({value:D})=>{D&&D.length&&u("department",D)},value:o.department})),e.createElement(w,{label:"Password",error:h.password},e.createElement(K,{disabled:g,id:"password",type:"password",onChange:q,onBlur:L,value:o.password})),e.createElement(w,{label:"Confirm Password",error:o.password!==o.confirmPassword?"Passwords should match":h.confirmPassword},e.createElement(K,{disabled:g,id:"confirmPassword",type:"password",onChange:q,onBlur:L,value:o.confirmPassword})),e.createElement(Y,{type:"button",id:"save",disabled:o.password!==o.confirmPassword||!o.department.length,onClick:()=>{v()},isLoading:g},"Save"))},Lr=()=>{const t=U(),{request:a,loading:r}=x(ke.create,{errorMessage:"Create failed!",successMessage:"Created succesfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Create Teacher"},e.createElement(Br,{isLoading:r,onSubmit:s=>{a(F({},s))}}))},Dr=()=>{const{request:t,loading:a,data:r,error:s}=x(xe.all),l=U(),n=c=>{const i=[];return c&&c.length&&c.forEach(({id:p,studentId:f,fullname:g,year:o,section:{name:h,department:{id:b}}})=>{i.push([f,g,b,h,o,[{action:"view",handler:()=>{l(`/app/admin/student/${p}`)}}]])}),i};return d.exports.useEffect(()=>{t()},[]),e.createElement(e.Fragment,null,e.createElement(qe,{error:s,isLoading:a,title:"Students",columns:["Student ID","Full name","Department","Section","Year","Actions"],data:n(r),actions:[{name:"Add One",link:"/app/admin/create-student"},{name:"Add Bulk",link:"/app/admin/create-students"},{name:"Import",link:"/app/admin/import-students"}]}))},Ar=()=>{const{id:t}=ge(),a=U(),{loading:r,request:s,error:l,data:n}=x(xe.getById),{loading:c,request:i}=x(xe.delete,{onComplete:()=>{a(-1)},errorMessage:"Could not delete!",successMessage:"deleted!"});return d.exports.useEffect(()=>{s(t)},[]),e.createElement(Z,{error:l,isLoading:r||c,title:"Student Details"},n&&e.createElement(e.Fragment,null,e.createElement(De,null,e.createElement(Ae,null,e.createElement(ve,{heading:n.fullname,endEnhancer:()=>e.createElement(Ge,null,e.createElement(Y,{size:"compact",shape:"pill",onClick:()=>{a(`/app/admin/update-student/${n.id}`)}},"Update"),e.createElement(Y,{size:"compact",shape:"pill",colors:{backgroundColor:"indianred",color:"white"},onClick:()=>{confirm("Are you sure, this action is permanent!")&&i(n.id)}},"Delete")),maxLines:1}),e.createElement(te,null,e.createElement(ae,{description:"Student ID"},n.studentId)),e.createElement(te,null,e.createElement(ae,{description:"Full Name"},n.fullname)),e.createElement(te,null,e.createElement(ae,{description:"Department"},n.section.department.name)),e.createElement(te,null,e.createElement(ae,{description:"Section"},n.section.name))),e.createElement(Me,null))))},Fr={studentId:ne().required("Student ID is required"),fullname:ne().required("Full Name is required"),department:V().required("Department is required"),section:V().required("Section is required"),year:ne().required("Year is required")},Jt=({fullname:t,studentId:a,department:r,section:s,onSubmit:l,isLoading:n})=>{const[c,i]=d.exports.useState([]),[p,f]=d.exports.useState([]),{loading:g,request:o}=x(pe.all,{onComplete:B=>{i(B.map(({id:H,name:E})=>({id:H,label:E})))}}),{loading:h,request:b}=x($e.allByDepartmentSlot,{onComplete:B=>{f(B.map(({id:H,name:E})=>({id:H,label:E})))}}),q=n||h||g;d.exports.useEffect(()=>{o(),r&&b(r[0].id)},[]);const{values:L,errors:v,touched:u,handleChange:$,handleBlur:D,handleSubmit:A,setFieldValue:k}=fe({validationSchema:ye().shape(F({},Fr)),initialValues:{fullname:t||"",studentId:a||"",department:r||[],section:s||[]},onSubmit:B=>{l&&l(ce(F({},B),{section:B.section[0].id}))}});return e.createElement(e.Fragment,null,e.createElement(w,{label:"Department",error:c.length?v.department:"No Departments are currently avaliable"},e.createElement(j,{disabled:q,id:"department",options:c,onChange:({value:B})=>{B&&B.length&&(k("department",B),b(B[0].id))},value:L.department})),e.createElement(w,{label:"Section",error:p.length?v.section:"No Sections are currently avaliable"},e.createElement(j,{disabled:q,id:"section",options:p,onChange:({value:B})=>{B&&B.length&&k("section",B)},value:L.section})),e.createElement(w,{label:"Student ID",error:v.studentId},e.createElement(K,{disabled:q,id:"studentId",type:"text",onChange:$,onBlur:D,value:L.studentId})),e.createElement(w,{label:"Full Name",error:v.fullname},e.createElement(K,{disabled:q,id:"fullname",type:"text",onChange:$,onBlur:D,value:L.fullname})),e.createElement(w,{label:"Year",error:v.year},e.createElement(K,{disabled:q,id:"year",type:"number",onChange:$,onBlur:D,value:L.year})),e.createElement(Y,{type:"button",id:"save",onClick:()=>{A()},isLoading:q},"Save"))},Ir=()=>{const t=U(),{id:a}=ge();d.exports.useEffect(()=>{s(a)},[]);const{loading:r,request:s,error:l,data:n}=x(xe.getById),{request:c,loading:i}=x(xe.update,{errorMessage:"Could not update!",successMessage:"Updated successfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Update Student",error:l,isLoading:r},n&&e.createElement(Jt,{fullname:n.fullname,department:[{label:n.section.department.name,id:n.section.department.id}],section:[{label:n.section.name,id:n.section.id}],studentId:n.studentId,isLoading:r||i,onSubmit:p=>{c(a,F({},p))}}))},Nr=()=>{const t=U(),{request:a,loading:r}=x(xe.create,{errorMessage:"Create failed!",successMessage:"Created succesfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Create Student"},e.createElement(Jt,{isLoading:r,onSubmit:s=>{a(F({},s))}}))},Tr={studentId:ne().required("Student ID is required"),fullname:ne().required("Full Name is required"),department:V().required("Department is required"),section:V().required("Section is required"),year:ne().required("Year is required")},Mr=({fullname:t,studentId:a,department:r,section:s,onSubmit:l,isLoading:n})=>{const[c,i]=d.exports.useState([]),[p,f]=d.exports.useState([]),[g,o]=d.exports.useState([]),{loading:h,request:b}=x(pe.all,{onComplete:E=>{i(E.map(({id:M,name:P})=>({id:M,label:P})))}}),{loading:q,request:L}=x($e.allByDepartmentSlot,{onComplete:E=>{f(E.map(({id:M,name:P})=>({id:M,label:P})))}}),v=n||q||h;d.exports.useEffect(()=>{b(),r&&L(r[0].id)},[]);const{values:u,errors:$,touched:D,handleChange:A,handleBlur:k,handleSubmit:B,setFieldValue:H}=fe({validationSchema:ye().shape(F({},Tr)),initialValues:{fullname:t||"",studentId:a||"",department:r||[],section:s||[]},onSubmit:E=>{o([...g,ce(F({},E),{section:E.section[0].id})])}});return e.createElement(e.Fragment,null,e.createElement(Ee,{flexGridColumnCount:2,flexGridColumnGap:"scale800",flexGridRowGap:"scale800",justifyItems:"space-between"},e.createElement(T,null,e.createElement(w,{label:"Department",error:c.length?$.department:"No Departments are currently avaliable"},e.createElement(j,{disabled:v,id:"department",options:c,onChange:({value:E})=>{E&&E.length&&(H("department",E),L(E[0].id))},value:u.department}))),e.createElement(T,null,e.createElement(w,{label:"Section",error:p.length?$.section:"No Sections are currently avaliable"},e.createElement(j,{disabled:v,id:"section",options:p,onChange:({value:E})=>{E&&E.length&&H("section",E)},value:u.section}))),e.createElement(T,null,e.createElement(w,{label:"Student ID",error:$.studentId},e.createElement(K,{disabled:v,id:"studentId",type:"text",onChange:A,onBlur:k,value:u.studentId}))),e.createElement(T,null,e.createElement(w,{label:"Full Name",error:$.fullname},e.createElement(K,{disabled:v,id:"fullname",type:"text",onChange:A,onBlur:k,value:u.fullname}))),e.createElement(T,null,e.createElement(w,{label:"Year",error:$.year},e.createElement(K,{disabled:v,id:"year",type:"number",onChange:A,onBlur:k,value:u.year})))),e.createElement(Y,{type:"button",overrides:{BaseButton:{style:({$theme:E})=>({width:"100%"})}},onClick:()=>{B()},isLoading:v},"Add"),e.createElement(ve,{heading:"Students",maxLines:1}),e.createElement(Nt,{items:g.map(({studentId:E,fullname:M,year:P})=>`${M} [${E}] - ${P}`),removable:!0,onChange:({oldIndex:E,newIndex:M})=>o(M===-1?ot.arrayRemove(g,E):ot.arrayMove(g,E,M))}),e.createElement(Y,{type:"button",id:"save",disabled:g.length<1,onClick:()=>{l({students:g})},isLoading:v},"Save All"))},Pr=()=>{const t=U(),{request:a,loading:r}=x(xe.createBulk,{errorMessage:"Create failed!",successMessage:"Created succesfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Create Students"},e.createElement(Mr,{isLoading:r,onSubmit:s=>{a(F({},s))}}))};function Rr({onSubmit:t,isLoading:a}){const[r,s]=d.exports.useState([]),[l,n]=d.exports.useState([]),c=f=>{try{const g=f.split(/\r\n|\n/),o=g[0].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/),h=[];for(let q=1;q<g.length;q++){const L=g[q].split(/,(?![^"]*"(?:(?:[^"]*"){2})*[^"]*$)/);if(o&&L.length==o.length){const v={};for(let u=0;u<o.length;u++){let $=L[u];$.length>0&&($[0]=='"'&&($=$.substring(1,$.length-1)),$[$.length-1]=='"'&&($=$.substring($.length-2,1))),o[u]&&(v[o[u]]=$)}Object.values(v).filter(u=>u).length>0&&h.push(v)}}const b=o.map(q=>({name:q,selector:q}));n(h),s(b)}catch{alert(`Could not process file: ${error}`)}},i=f=>{try{const g=f.target.files[0],o=new FileReader;o.onload=h=>{const b=h.target.result,q=Oa(b,{type:"binary"}),L=q.SheetNames[0],v=q.Sheets[L],u=ja.sheet_to_csv(v,{header:1});c(u)},o.readAsBinaryString(g)}catch{alert(`Could not process file: ${error}`)}},p=()=>{if(l.length){const f=l.map(g=>{const o=["id","student id","id number"],h=["department","dept","departments"],b=["section","sec"],q=["name","student name","full name","student full name"],L=Object.keys(g),v={};L.forEach($=>{o.includes($.toLowerCase())&&(v[$]="studentId"),h.includes($.toLowerCase())&&(v[$]="department"),b.includes($.toLowerCase())&&(v[$]="section"),q.includes($.toLowerCase())&&(v[$]="fullname")});const u=F({},g);return delete u.id,Object.keys(v).forEach($=>{u[v[$]]=g[$]}),u});t&&t({students:f})}else alert("No data found for import. Make sure to upload spreadsheet first!")};return e.createElement(Z,{isLoading:a,title:"Upload Spreadsheet file",actions:[{name:"Import",handler:p}]},e.createElement("p",null,"Make sure the spreadsheet you upload contains the following fields:"),e.createElement("ul",null,e.createElement("li",null,"id"),e.createElement("li",null,"fullname"),e.createElement("li",null,"section"),e.createElement("li",null,"department")),e.createElement("input",{type:"file",onChange:i}),e.createElement(za,{pagination:!0,highlightOnHover:!0,columns:r,data:l}))}const Gr=()=>{const t=U(),{request:a,loading:r}=x(xe.import,{errorMessage:"Create failed!",successMessage:"Created succesfully!",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"Import Students"},e.createElement(Rr,{isLoading:r,onSubmit:s=>{a(s)}}))},zr=()=>{const{request:t,loading:a,data:r,error:s}=x(xe.all),l=U(),n=c=>{const i=[];return c&&c.length&&c.forEach(({id:p,studentId:f,fullname:g,section:{name:o,department:{id:h}}})=>{i.push([f,g,h,o,[{action:"view",handler:()=>{l(`/app/admin/student/${p}`)}}]])}),i};return d.exports.useEffect(()=>{t()},[]),e.createElement(e.Fragment,null,e.createElement(qe,{error:s,isLoading:a,title:"Students",columns:["Student ID","Full name","Department","Section","Actions"],data:n(r),actions:[{name:"Add One",link:"/app/admin/create-student"},{name:"Add Bulk",link:"/app/admin/create-students"}]}))},Or=()=>{const{id:t}=ge(),a=U(),{loading:r,request:s,error:l,data:n}=x(xe.getById),{loading:c,request:i}=x(xe.delete,{onComplete:()=>{a(-1)},errorMessage:"Could not delete!",successMessage:"deleted!"});return d.exports.useEffect(()=>{s(t)},[]),e.createElement(Z,{error:l,isLoading:r||c,title:"Student Details"},n&&e.createElement(e.Fragment,null,e.createElement(De,null,e.createElement(Ae,null,e.createElement(ve,{heading:n.fullname,endEnhancer:()=>e.createElement(Ge,null,e.createElement(Y,{size:"compact",shape:"pill",onClick:()=>{a(`/app/admin/update-student/${n.id}`)}},"Update"),e.createElement(Y,{size:"compact",shape:"pill",colors:{backgroundColor:"indianred",color:"white"},onClick:()=>{confirm("Are you sure, this action is permanent!")&&i(n.id)}},"Delete")),maxLines:1}),e.createElement(te,null,e.createElement(ae,{description:"Student ID"},n.studentId)),e.createElement(te,null,e.createElement(ae,{description:"Full Name"},n.fullname)),e.createElement(te,null,e.createElement(ae,{description:"Department"},n.section.department.name)),e.createElement(te,null,e.createElement(ae,{description:"Section"},n.section.name))),e.createElement(Me,null))))},jr=({id:t})=>{const a=U(),{loading:r,request:s,error:l}=x(be.getById,{onComplete:({section:{id:A}})=>{c(A)}}),{loading:n,request:c}=x(xe.allBySection,{errorMessage:"Could not fetch students!",onComplete:A=>{h(A.map(k=>ce(F({},k),{selected:!1})))}}),{loading:i,request:p}=x(Ut.create,{successMessage:"Completed!",errorMessage:"Could not take attendance!",onComplete:()=>{a(-1)}});d.exports.useEffect(()=>{s(t)},[]);const f=i||r||n,g=()=>{const A={schedule:t,date:b,students:o.map(({id:k,selected:B})=>({id:k,absent:!B}))};p(A)},[o,h]=d.exports.useState([]),[b,q]=d.exports.useState(""),L=Boolean(o.length),v=L&&o.every(A=>A.selected),u=L&&o.some(A=>A.selected);function $(A){h(k=>k.map(B=>ce(F({},B),{selected:!v})))}function D(A){const{name:k,checked:B}=A.currentTarget;h(H=>H.map(E=>ce(F({},E),{selected:String(E.fullname)===k?B:E.selected})))}return e.createElement(Z,{title:"Attendance Sheet",isLoading:f,error:l},e.createElement(w,{label:"Date"},e.createElement(pt,{onChange:({date:A})=>q(A)})),e.createElement(ve,{heading:"Students",maxLines:1,subHeading:` ${o.filter(({selected:A})=>!A).length} Absent , ${o.filter(({selected:A})=>A).length} Present`}),e.createElement(Ua,{data:o},e.createElement(nt,{overrides:{TableHeadCell:{style:{width:"1%"}},TableBodyCell:{style:{width:"1%"}}},header:e.createElement(xt,{checked:v,isIndeterminate:!v&&u,onChange:$})},A=>e.createElement(xt,{name:A.fullname,checked:A.selected,onChange:D})),e.createElement(nt,{header:"Student Name"},A=>e.createElement(e.Fragment,null,A.fullname)),e.createElement(nt,{header:"Current Attendance Status"},A=>{const k=A.attendance,B=k.filter(({absent:M})=>M).length,H=k.filter(({absent:M})=>!M).length,E=Math.round(H/(B+H)*100);return e.createElement(lt,{closeable:!1,kind:E>=75?"positive":"negative"},isNaN(E)?"0 %":`${E} %`)}),e.createElement(nt,{header:"ID"},A=>A.studentId)),e.createElement(Y,{type:"button",id:"save",disabled:!b,onClick:()=>{g()}},"Submit Attendance"))},Bt=()=>{const{id:t}=ge();return e.createElement(jr,{id:t})},Ur=()=>{const t=U(),{metadata:{id:a,fullname:r}}=ze();return e.createElement(e.Fragment,null,e.createElement(Qe,{removable:!0,teacher:[{id:a,label:r}],by:"teacher",makeup:!0,reserved:!0,id:a,actions:[{name:"Go to Details",handler:({id:s})=>{t(`/app/teacher/schedule/${s}`)}}]}))},Vr=()=>{const{id:t}=ge();return e.createElement(e.Fragment,null,e.createElement(Ht,{id:t,actions:[{name:"Take Attendance",link:`/app/teacher/create-attendance/${t}`}]}))},Hr=()=>{const t=U(),{metadata:{id:a}}=ze();return e.createElement(Qe,{by:"teacher",title:"Attendance",id:a,info:"Click on a class to view attendance information",actions:[{name:"Attendance",handler:({id:r})=>{t(`/app/teacher/attendance/${r}`)}}]})},Yr=()=>{const{id:t}=ge();return e.createElement(e.Fragment,null,e.createElement(Vt,{id:t,actions:[{name:"Take Attendance",link:`/app/teacher/create-attendance/${t}`}]}))},Wr={email:ne().email().required("Email is required"),password:ne().required("Password is required"),fullname:ne().required("Fullname is required")},_r=({email:t,password:a,fullname:r,onSubmit:s,isLoading:l,isAdmin:n})=>{const{values:c,errors:i,touched:p,handleChange:f,handleBlur:g,handleSubmit:o,setFieldValue:h}=fe({validationSchema:ye().shape(F({},Wr)),initialValues:{fullname:r||"",email:t||"",password:a||""},onSubmit:b=>{b.email&&b.password&&b.fullname&&s&&s(F({},b))}});return e.createElement(e.Fragment,null,e.createElement(w,{label:"Full Name",error:i.fullname},e.createElement(K,{disabled:l,id:"fullname",type:"text",onChange:f,onBlur:g,value:c.fullname})),e.createElement(w,{label:"Email",error:i.email},e.createElement(K,{disabled:l,id:"email",type:"email",onChange:f,onBlur:g,value:c.email})),e.createElement(w,{label:"Password",error:i.password},e.createElement(K,{disabled:l,id:"password",type:"password",onChange:f,onBlur:g,value:c.password})),e.createElement(Y,{type:"button",id:"save",kind:"secondary",shape:"pill",onClick:()=>{o()},isLoading:l},"Sign Up"))},Kr=()=>{const t=U(),{request:a,loading:r}=x(ut.registerAdmin,{successMessage:"Admin Account Created!",errorMessage:"Could not register account",onComplete:()=>{t(-1)}});return e.createElement(Z,{title:"New Admin Account"},e.createElement(_r,{isLoading:r,onSubmit:s=>{a(s)}}))},Jr=()=>{const[t,a]=d.exports.useState(JSON.parse(localStorage.getItem("auth"))||{});return e.createElement(Tt.Provider,{value:{metadata:t,setMetadata:a}},e.createElement(Va,{placement:Ha.topRight},e.createElement(Ya,null,e.createElement(R,{path:"/",element:e.createElement(en,null)},e.createElement(R,{index:!0,element:e.createElement(yn,null)}),e.createElement(R,{path:"login",element:e.createElement(Sn,null)}),e.createElement(R,{path:"unauthorized",element:e.createElement($n,null)})),e.createElement(R,{path:"/app",element:e.createElement(tn,null)},e.createElement(R,{index:!0,element:e.createElement(gn,null)}),e.createElement(R,{path:"admin",element:e.createElement(dn,null)},e.createElement(R,{index:!0,element:e.createElement(Dn,null)}),e.createElement(R,{path:"generate-schedule",element:e.createElement(ar,null)}),e.createElement(R,{path:"schedule/:id",element:e.createElement(On,null)}),e.createElement(R,{path:"departments",element:e.createElement(jn,null)}),e.createElement(R,{path:"department/:id",element:e.createElement(Yn,null)}),e.createElement(R,{path:"update-department/:id",element:e.createElement(_n,null)}),e.createElement(R,{path:"create-department",element:e.createElement(Kn,null)}),e.createElement(R,{path:"sections",element:e.createElement(nr,null)}),e.createElement(R,{path:"section/:id",element:e.createElement(cr,null)}),e.createElement(R,{path:"update-section/:id",element:e.createElement(mr,null)}),e.createElement(R,{path:"create-section",element:e.createElement(dr,null)}),e.createElement(R,{path:"courses",element:e.createElement(ur,null)}),e.createElement(R,{path:"course/:id",element:e.createElement(pr,null)}),e.createElement(R,{path:"update-course/:id",element:e.createElement(hr,null)}),e.createElement(R,{path:"create-course",element:e.createElement(Er,null)}),e.createElement(R,{path:"classrooms",element:e.createElement(fr,null)}),e.createElement(R,{path:"classroom/:id",element:e.createElement(yr,null)}),e.createElement(R,{path:"update-classroom/:id",element:e.createElement(Cr,null)}),e.createElement(R,{path:"create-classroom",element:e.createElement(Sr,null)}),e.createElement(R,{path:"teachers",element:e.createElement(xr,null)}),e.createElement(R,{path:"teacher/:id",element:e.createElement($r,null)}),e.createElement(R,{path:"update-teacher/:id",element:e.createElement(wr,null)}),e.createElement(R,{path:"create-teacher",element:e.createElement(Lr,null)}),e.createElement(R,{path:"students",element:e.createElement(Dr,null)}),e.createElement(R,{path:"student/:id",element:e.createElement(Ar,null)}),e.createElement(R,{path:"update-student/:id",element:e.createElement(Ir,null)}),e.createElement(R,{path:"create-student",element:e.createElement(Nr,null)}),e.createElement(R,{path:"create-students",element:e.createElement(Pr,null)}),e.createElement(R,{path:"import-students",element:e.createElement(Gr,null)}),e.createElement(R,{path:"attendances/:id",element:e.createElement(zr,null)}),e.createElement(R,{path:"attendance/:id",element:e.createElement(Or,null)}),e.createElement(R,{path:"create-attendance/:id",element:e.createElement(Bt,null)}),e.createElement(R,{path:"new-admin",element:e.createElement(Kr,null)})),e.createElement(R,{path:"teacher",element:e.createElement(pn,null)},e.createElement(R,{index:!0,element:e.createElement(Ur,null)}),e.createElement(R,{path:"schedule/:id",element:e.createElement(Vr,null)}),e.createElement(R,{path:"create-attendance/:id",element:e.createElement(Bt,null)}),e.createElement(R,{path:"attendances",element:e.createElement(Hr,null)}),e.createElement(R,{path:"attendance/:id",element:e.createElement(Yr,null)}))),e.createElement(R,{path:"*",element:e.createElement(xn,null)}))))};class Qr extends e.Component{constructor(a){super(a);this.state={error:null,errorInfo:null}}componentDidCatch(a,r){this.setState({error:a,errorInfo:r})}render(){return this.state.errorInfo?e.createElement("div",null,e.createElement("h2",null,"Something went wrong."),e.createElement("details",{style:{whiteSpace:"pre-wrap"}},this.state.error&&this.state.error.toString(),e.createElement("br",null),this.state.errorInfo.componentStack)):this.props.children}}const Xr=new Wa,Zr={primary:"#285E61",primary50:"#E6FFFA",primary100:"#B2F5EA",primary200:"#81E6D9",primary300:"#4FD1C5",primary400:"#38B2AC",primary500:"#319795",primary600:"#2C7A7B",primary700:"#285E61"},es={colors:{}},ts=_a(Zr,es);Ka.render(e.createElement(e.StrictMode,null,e.createElement(Qr,null,e.createElement(Ja,{value:Xr},e.createElement(Qa,{theme:ts},e.createElement(Xa,null,e.createElement(Jr,null)))))),document.getElementById("root"));
